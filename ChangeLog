2005-02-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmissing/strlcpy.c, src/libmissing/strlcat.c:
	  Latest from <ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/>.

2005-01-26  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Added 'devel' and 'libs' subpackages.

	* munge.spec: Added version number so "rpmbuild -ta" will work.

	* munge.spec:
	  Removed %post rm of chkconfig droppings from the "-1 priority" bug.

2005-01-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/hash.c(hash_destroy): Fixed memory leak.

2004-12-21  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.1.

	* HISTORY, META, NEWS, TODO: Updated for 0.4.1 release.

	* munge.spec:
	  Added %post to remove chkconfig droppings from the "-1 priority" bug.

	* src/etc/munge.init:
	  Fixed bug preventing priorities from being recognized by chkconfig.

2004-12-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth_recv.c: Added <sys/types.h> include for getpeereid().

	* NEWS: Updated v0.4 news wrt SuSE/LSB init script support.

	* JARGON: Updated URL.

2004-12-07  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.

	* HISTORY, META, NEWS, PLATFORMS: Updated for 0.4 release.

	* src/libmunge/munge.3.in, src/libmunge/munge.h,
	  src/libmunge/strerror.c: Cleaned up error codes.

	* README, src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/munged/munged.8.in: Tweaked verbage.

2004-12-02  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated notes regarding creation of secret key.

	* src/etc/munge.init: Revamped for SuSE and maybe LSB.

	* configure.ac, config/x_ac_check_ssl.m4:
	  Moved X_AC_CHECK_SSL before AC_PROG_LIBTOOL to allow the
	  linker's libpath to be computed correctly under AIX.

2004-12-01  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated info regarding /etc/sysconfig/munge.
	* munge.spec, src/etc/Makefile.am, src/etc/munge.sysconfig:
	  Added /etc/sysconfig/munge.

	* src/libmunge/enum.c(_munge_enum_lookup): Changed return type from
	  const munge_enum_table_t to munge_enum_table_t.

2004-11-30  Chris Dunlap  <cdunlap@llnl.gov>

	* config/Make-rpm.mk: Updated to reflect prior changes to META.

	* src/munged/munged.8.in: Updated info for '--force' cmdline opt.

2004-11-29  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c: Added <sys/socket.h> for AF_INET.

	* config/x_ac_check_cond_lib.m4, config/x_ac_check_fifo_recvfd.m4,
	  config/x_ac_check_peercred.m4, config/x_ac_check_pthreads.m4,
	  config/x_ac_debug.m4: Tweaked docs to be consistent with others.

	* configure.ac, config/x_ac_check_ssl.m4: Added X_AC_CHECK_SSL.

2004-11-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/unmunge.1.in: Updated verbage.

	* src/munge/unmunge.c:
	  Changed MUNGE_KEY_ORIGIN to MUNGE_KEY_ENCODE_HOST.
	  Tweaked munge_keys[] strings.

	* configure.ac, config/x_ac_aix.m4:
	  Added X_AC_AIX to enable run-time linking under AIX.

2004-11-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/Makefile.am, src/libcommon/m_msg.c,
	  src/libcommon/m_msg.h, src/libcommon/msg.c, src/libcommon/msg.h,
	  src/libmunge/Makefile.am, src/libmunge/m_msg_client.c,
	  src/libmunge/m_msg_client.h, src/libmunge/msg_client.c,
	  src/libmunge/msg_client.h:
	  Renamed src/libcommon/msg.[ch] to m_msg.[ch].
	  Renamed src/libmunge/msg_client.[ch] to m_msg_client.[ch].
	  Changed "msg_" prefix to "m_msg_".  All callers changed.
	  Fixed "previous declaration of 'msg_t'" error under AIX.

	* src/libmunge/Makefile.am:
	  Added -export-symbols-regex to libmunge.

	* src/libcommon/Makefile.am, src/libcommon/msg.c, src/libcommon/msg.h,
	  src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Renamed src/libcommon/munge_msg.[ch] to msg.[ch].
	  Removed "munge_" prefix on all "munge_msg_*" functions.
	  All callers changed.
	* src/libmunge/ctx.c, src/libmunge/ctx.h:
	  Removed unnecessary include for munge_msg.h.

2004-11-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/enum.c:
	  Fixed compiler warning regarding assignment of read-only variable.

	* META, config/x_ac_meta.m4, src/libmunge/Makefile.am:
	  Added LT_Current, LT_Revision, and LT_Age for libtool -version-info.

	* README, munge.spec: Updated verbage.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Updated verbage.
	* src/libmunge/munge.h: Sync'd with manpages.

2004-11-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h:
	  Removed MUNGE_OPT_LAST_ENTRY, MUNGE_CIPHER_LAST_ENTRY,
	  MUNGE_MAC_LAST_ENTRY, MUNGE_ZIP_LAST_ENTRY, EMUNGE_LAST_ENTRY.
	* src/munged/zip.c: Removed use of MUNGE_ZIP_LAST_ENTRY.

	* src/libcommon/munge_msg.h: Removed MUNGE_MSG_LAST_ENTRY.

	* configure.ac, src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/libmunge/munge_enum.3.in,
	  src/munge/munge.1.in, src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Added munge_enum manpage.
	* src/libmunge/Makefile.am, src/libmunge/enum.c, src/libmunge/munge.h,
	  src/libmunge/strings.c: Added munge_enum_is_valid(),
	  munge_enum_int_to_str(), and munge_enum_str_to_int().
	  Removed munge_cipher_strings, munge_mac_strings, munge_zip_strings.
	  Replaced libmunge/strings.c with libmunge/enum.c.
	* src/munge/munge.c, src/munge/remunge.c, src/munge/unmunge.c:
	  Replaced use of munge_cipher_strings, munge_mac_strings, and
	  munge_zip_strings.

	* src/libcommon/str.c, src/munged/auth_recv.c, src/munged/hash.c,
	  src/munged/munged.c, src/munge/read.c: Tweaked formatting.

2004-11-11  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Tweaked inet_ntop replacement test for Solaris.

	* src/libmissing/inet_ntop.h: Added sys/socket.h include for socklen_t.

	* src/libmissing/inet_ntop.h: Changed #ifndef x to #if !x.
	* src/libmissing/strlcat.h, src/libmissing/strlcpy.h:
	  Changed #if #else x to #if !x.

	* src/libmunge/auth_send.c, src/libmunge/msg_client.c,
	  src/munged/munged.c: Replaced strlcat/strlcpy includes w/ missing.h.

	* configure.ac: Changed X_AC_CHECK_COND_LIB libnsl test
	  from inet_ntoa() to gethostbyname().

	* configure.ac, src/libmissing/inet_ntop.c, src/libmissing/inet_ntop.h,
	  src/libmissing/missing.h, src/munge/unmunge.c, src/munged/conf.c:
	  Added support for platforms lacking inet_ntop().
	  Replaced inet_ntoa() with inet_ntop().

2004-11-10  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated.
	* README.AIX: Added.
	* configure.ac: Changed to older AC_INIT & AM_INIT_AUTOMAKE constructs.
	* munge.spec: Updated description.  Added manpages.
	* config/x_ac_meta.m4: Added metatags for AUTHOR and DATE.
	* src/libcommon/Makefile.am, src/libmunge/Makefile.am,
	  src/munge/Makefile.am, src/munged/Makefile.am: Added manpages.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Added.

	* src/libcommon/munge_defs.h, src/munged/conf.c:
	  Added MUNGE_AUTH_ROOT_ALLOW_FLAG.

	* src/munged/conf.c: Changed "--keyfile" cmdline opt to "--key-file".

	* src/munged/conf.c: Added "--auth-pipe-dir" cmdline opt.

2004-11-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/auth_recv.c,
	  src/munged/conf.c, src/munged/conf.h:
	  Changed MUNGE_AUTH_PIPE_NAME_PREFIX to MUNGE_AUTH_PIPE_DIR.
	  Changed MUNGE_AUTH_PIPE_NAME_RND_BYTES to MUNGE_AUTH_PIPE_RND_BYTES.
	  Changed conf struct auth_pipe_prefix to auth_pipe_dir.

	* src/munged/conf.c:
	  Changed "--nthreads" cmdline opt to "--num-threads".
	  Tweaked display_help() information.

	* src/munge/munge.c, src/munge/remunge.c, src/munge/unmunge.c:
	  Tweaked display_help() information.

	* src/libcommon/auth_policy.h, src/libcommon/munge_defs.h,
	  src/munged/conf.c: Moved defines from auth_policy.h to munge_defs.h.
	  Renamed AUTH_PIPE_NAME_PREFIX to MUNGE_AUTH_PIPE_NAME_PREFIX.
	  Renamed AUTH_PIPE_NAME_RND_BYTES to MUNGE_AUTH_PIPE_NAME_RND_BYTES.

	* src/libcommon/auth_policy.h:
	  Removed AUTH_PIPE_NAME_MAX_LEN.
	  Changed AUTH_PIPE_NAME_RND_BYTES from 8 to 16.
	* src/libmunge/auth_send.c, src/munged/auth_recv.c:
	  Changed static bufs using AUTH_PIPE_NAME_MAX_LEN to dynamic memory.
	* src/munged/conf.c, src/munged/conf.h:
	  Added auth_pipe_prefix & auth_pipe_rnd_bytes to conf struct.

	* src/libmunge/munge.h:
	  Changed indenting of preprocessor cmds so line begins with '#'.

2004-11-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/work.c(work_queue):
	  Fixed bug where rc was used uninitialized.
	  Do not signal condition if _work_enqueue() fails.

	* src/libcommon/munge_msg.c:
	  Documented maxlen parm in munge_msg_send() and munge_msg_recv().

	* src/libmunge/auth_send.c:
	  Added missing maxlen parm to invocation of munge_msg_recv().
	* src/munged/auth_recv.c:
	  Added missing maxlen parm to invocation of munge_msg_send().

	* : Re-bootstrap'd with automake-1.9.3.

2004-10-29  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with libtool-1.5.6 Debian: 220.

	* munge.spec: Added %config(noreplace) to init script.

2004-10-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Added support for /etc/sysconfig/munge.

	* : Re-bootstrap'd with automake-1.9.2.

	* munge.spec, src/etc/Makefile.am, src/etc/munge.init:
	  Removed dependence on /etc/rc.d/init.d directory.

2004-10-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/job.c: Added include for building on SuSE SLES-8.

	* README: Updated.

	* src/libcommon/munge_defs.h: Added MUNGE_MAXIMUM_REQ_LEN.
	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Added maxlen parm to munge_msg_send() and munge_msg_recv().
	  All callers changed.
	* src/libmunge/msg_client.c(munge_msg_client_xfer):
	  Abort retry attempts on EMUNGE_BAD_LENGTH.
	* src/libmunge/munge.h, src/libmunge/strerror.c:
	  Added EMUNGE_BAD_LENGTH.  Renumbered munge_err enum.
	* src/munged/job.c(_job_exec): Limit msg len to MUNGE_MAXIMUM_REQ_LEN.

	* src/libcommon/munge_msg.h: Incremented MUNGE_MSG_VERSION to 3
	  since retry field was added to munge_msg_head struct.

2004-09-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Tweaked comments.

	* src/munged/job.c(job_accept): Changed log msg for processing backlog.

	* src/munged/dec_v1.c(dec_v1_validate_replay):
	  Added log msg when allowing credential replay due to retry.

	* src/libcommon/munge_defs.h:
	  Added MUNGE_SOCKET_XFER_USLEEP.  Removed MUNGE_SOCKET_ACCEPT_USLEEP.
	  Changed MUNGE_SOCKET_XFER_ATTEMPTS from 3 to 5.
	* src/libmunge/msg_client.c(munge_msg_client_xfer):
	  Added linear back-off to retry of failed credential transactions.
	* src/munged/job.c(job_accept):
	  Changed usleep() to work_wait() when accept() exceeds open fd limit.

2004-09-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Removed leading underscore from public functions.
	  All callers changed.

	* src/libcommon/munge_defs.h:
	  Added MUNGE_REPLAY_RETRY_FLAG.  Added MUNGE_SOCKET_XFER_ATTEMPTS.
	  Named MUNGE_SOCKET_CONNECT_RETRIES as MUNGE_SOCKET_CONNECT_ATTEMPTS.
	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Added retry field to munge_msg_head struct.
	  Removed _munge_msg_reset() -- merged into _munge_msg_create().
	* src/libmunge/decode.c, src/libmunge/encode.c,
	  src/libmunge/msg_client.c, src/libmunge/msg_client.h:
	  Added munge_msg_client_xfer() to retry failed msg transactions.
	  Changed _munge_msg_client_connect() and
	  _munge_msg_client_disconnect() to static functions.
	* src/munged/conf.c, src/munged/conf.h:
	  Added got_replay_retry flag to conf struct.
	* src/munged/dec_v1.c: Added dec_v1_check_retry().
	  Added test for got_replay_retry flag to dec_v1_validate_replay().
	* src/munged/enc_v1.c: Added enc_v1_check_retry().

2004-09-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c(_gids_hash_add):
	  Removed warning for having detected duplicate uid for given gid.

2004-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/conf.h, src/munged/munged.c:
	  Moved global conf definition from munged.c to conf.c.

2004-09-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/random.c: Allow lack of entropy to be forced (-f).

	* src/munged/random.c: Replaced parm asserts with if-guards.

	* src/munged/gids.c:
	  Added #ifndef's around GIDS_DEBUG and GIDS_GROUP_FILE.

	* src/munged/work.c:
	  Moved pthread_cond_signal() outside of critical region.
	  Replaced public function parm asserts with if-guards.

	* src/munged/timer.c:
	  Moved pthread_cond_signal() outside of critical region.

	* src/munged/gids.c(gids_destroy):
	  Moved hash_destroy() outside of critical region.

2004-09-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c: Revamped "-u" and "-g" cmdline opts.
	* src/munge/remunge.c: Added "-u" and "-g" cmdline opts.

	* src/munged/timer.h: Tweaked timer_init() docs.

	* src/munged/hash.c: Replaced parm asserts with if-guards.

	* src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Removed extern declaration of conf -- now in conf.h.

	* src/munged/gids.c, src/munged/gids.h:
	  Added timer to periodically re-parse group info.
	* src/munged/conf.c, src/munged/conf.h:
	  Added extern declaration of conf.
	  Added got_group_stat flag to struct conf.
	* src/libcommon/munge_defs.h:
	  Added MUNGE_GROUP_STAT_FLAG and MUNGE_GROUP_PARSE_TIMER.

2004-09-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/replay.c: Removed mac_len from union replay_key
	  to further reduce storage requirements for replay data.
	* src/munged/replay.c: Changed struct replay_key to union replay_key
	  to reduce storage requirements for replay data.

	* src/munged/cred.c(cred_create):
	  Fixed bug where error condition was not set on failure.

2004-09-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/remunge.c:
	  Fixed strtol() int/long mismatches for 64-bit platforms.

2004-09-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.h: Changed GIDS_HASH_SIZE from 1213 to 2053.

2004-09-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/remunge.c: Set stdout to be line buffered.
	* src/munge/remunge.c: Close stdin.
	* src/munge/remunge.c: Ignore SIGHUP.
	* src/munge/remunge.c: Changed DEF_DO_DECODE from 1 to 0.
	* src/munge/remunge.c: Subtract error count from number processed.

	* src/munged/hash.c: Changed HASH_ALLOC from 256 to 1024.
	* src/munged/replay.c: Changed REPLAY_ALLOC from 256 to 1024.
	* src/munged/replay.h: Changed REPLAY_HASH_SIZE from 4013 to 65537.

	* src/munged/gids.c, src/munged/gids.h: Added GIDS_HASH_SIZE.

	* src/munged/munged.c(main):
	  Changed default log priority level from LOG_NOTICE to LOG_INFO.

	* src/munged/conf.c(display_help): Added newline.

	* src/munge/munge.c(display_strings,str_to_int): Tweaked formatting.

	* src/munge/Makefile.am, src/munge/remunge.c: Added.

2004-08-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/job.c(job_accept):
	  Fix bug causing the daemon to crash if accept() exceeded the
	  open file descriptor limit for the process.

	* src/libmunge/ctx.c, src/libmunge/munge.h:
	  Added munge_ctx_copy().  Added docs wrt context function usage.

2004-08-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_DEFAULT_ZIP from MUNGE_ZIP_ZLIB to MUNGE_ZIP_NONE.

2004-08-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c(destroy_conf): Removed unnecessary test for ctx.
	* src/munge/unmunge.c(destroy_conf): Removed unnecessary test for ctx.

2004-08-20  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c(parse_cmdline):
	  Check for overflow of time-to-live "-t" cmdline option.

	* src/munge/munge.c(parse_cmdline):
	  Changed strtol() err msg from log_errno() to log_err().

2004-08-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c:
	  Reformatted code.  Changed help option string width.

	* src/munge/munge.c: Tweaked use of strtol().
	* src/munge/munge.c(str_to_int): Revamped.

2004-08-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_REPLAY_PURGE_TIMER from 300 to 60.

2004-08-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.9.1.

	* src/munged/conf.c:
	  Added temporary cmdline opts for 'keyfile' and 'nthreads'.

	* src/munged/job.c(job_accept): Tweaked log messages.

	* src/libcommon/munge_defs.h: Changed MUNGE_THREADS from 4 to 2.

2004-08-11  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.9.

	* src/munged/work.c(work_fini):
	  Fixed bug preventing the worker thread(s) from being canceled.

2004-08-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/timer.c(timer_fini):
	  Changed assert of pthread_join() rc to an explicit test.
	  Reset timer_tid after timer thread has been joined.

	* src/libcommon/munge_defs.h, src/munged/conf.c, src/munged/conf.h,
	  src/munged/job.c, src/munged/job.h, src/munged/work.c,
	  src/munged/work.h:
	  Added support for thread work crew to process credential requests.
	* src/munged/munged.c, src/munged/sock.c, src/munged/sock.h:
	  Moved munge_sock_create() & munge_sock_destroy() to munged.c.
	  Moved munge_sock_accept() to job.c:job_accept().
	* src/munged/msg_server.c, src/munged/msg_server.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Moved munge_msg_server_thread() to job.c:_job_exec().
	  Moved err_v1_response() to job.c:job_error().

2004-07-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth_recv.c: Fixed bug in MUNGE_AUTH_RECVFD_MKNOD codepath
	  causing an auth pipe fd leak resulting in poor performance on AIX.

2004-07-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/sock.c, src/munged/timer.c:
	  Set pthread stacksize to 256KB (to appease ia64).

2004-06-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/munged.c:
	  Moved auth_recv_init(), replay_init(), replay_fini(),
	  gids_create(), and gids_destroy() from create_conf() to main().

2004-06-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/sock.c, src/munged/timer.c: Set pthread stacksize to 64KB.

2004-06-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h: Added support for C++.

2004-05-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c, src/munged/replay.c, src/munged/replay.h:
	  Fixed bug where decoded cred was marked as "played" even if the
	  rsp msg was not successfully delivered to the client {gnats:437}.

2004-05-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.8.5.

2004-05-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/auth_policy.h, src/libmunge/auth_send.c,
	  src/libmunge/auth_send.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/auth_recv.c,
	  src/munged/auth_recv.h: Added AUTH_PIPE_NAME_PREFIX.
	  Changed return types of auth_send() and auth_recv().
	  Changed reporting of auth_send() and auth_recv() errors.

2004-05-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/munged.c: Moved auth_recv_init()
	  before gids_create() to allow for quicker exit when !root on AIX.

	* src/munged/gids.c(gids_create): Allow errno == ENOENT to denote
	  success after last entry is returned by getgrent() for glibc-2.2.5.

2004-05-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/libcommon/munge_msg.c,
	  src/libcommon/munge_msg.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/cred.h, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/msg_server.c:
	  Incremented MUNGE_MSG_VERSION.  Fixed segfault occurring when
	  received message was smaller than its expected length {gnats:432}.

2004-04-30  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.3.

	* README, munge.spec: Updated description.

	* src/munge/munge.c, src/munged/gids.c: Tweaked includes for FreeBSD.
	* src/munge/munge.c, src/munged/zip.c: Minor tweaks for Solaris.

	* src/etc/Makefile.am: Replaced "/etc" with $(sysconfdir).

	* configure.ac: Added checks for standards.h, socklen_t, /dev/spx,
	  X_AC_CANONICAL, and X_AC_CHECK_FIFO_RECVFD.
	* config/x_ac_canonical.m4:
	  Added check to set the canonical host system type.
	* config/x_ac_check_fifo_recvfd.m4:
	  Added check to test whether an fd can be passed over a fifo.
	* config/x_ac_check_cond_lib.m4, config/x_ac_check_peercred.m4,
	  config/x_ac_check_pthreads.m4, config/x_ac_debug.m4,
	  config/x_ac_gpl_licensed.m4, x_ac_humor.m4, x_ac_meta.m4:
	  Reformatted.

	* src/libcommon/Makefile.am, src/libcommon/auth_policy.h,
	  src/libcommon/common.h, src/libcommon/munge_msg.h,
	  src/libmunge/Makefile.am, src/libmunge/auth_send.c,
	  src/libmunge/auth_send.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/Makefile.am, src/munged/auth.c,
	  src/munged/auth.h, src/munged/auth_recv.c, src/munged/auth_recv.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/munged.c:
	  Added support for authenticating clients under AIX & Solaris.
	  Replaced auth.[ch] with auth_policy.h & auth_(send|recv).[ch].

2004-04-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged/gids.c(gids_create): Added log msg.

2004-04-16  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v2_format.txt, src/libcommon/munge_defs.h,
	  src/libcommon/munge_msg.h, src/libmunge/ctx.c, src/libmunge/ctx.h,
	  src/libmunge/decode.c, src/libmunge/encode.c, src/libmunge/munge.h,
	  src/libmunge/strerror.c, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/Makefile.am, src/munged/conf.c, src/munged/conf.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/gids.c,
	  src/munged/gids.h, src/munged/hash.c, src/munged/hash.h,
	  src/munged/replay.c: Added support for UID & GID decode restrictions.

2004-04-14  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.3, libtool-1.5.6.

2004-04-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c: Tweaks for Solaris 2.8.

	* src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am:
	  Moved linking of libnsl from libmunge to munged/unmunge.

	* configure.ac, config/x_ac_check_cond_lib.m4,
	  src/libmunge/Makefile.am: Added checks for libnsl & libsocket.

	* configure.ac, src/libmissing/Makefile.am, src/libmissing/getopt.c,
	  src/libmissing/getopt.h, src/libmissing/getopt1.c, src/munge/munge.c,
	  src/munge/unmunge.c, src/munged/conf.c:
	  Added GNU getopt from glibc-2.3.2 to libmissing.

2004-04-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Tweaked in an attempt to make path independent.

2004-04-02  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added official UCRL number.

	* munge.spec, src/etc/munge.init:
	  Changed daemon rpm (re)start behavior at install or upgrade.

2004-03-31  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4, src/munge/unmunge.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/zip.c:
	  Added -pedantic to --enable-debug CFLAGS.

2004-03-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c(main):
	  Changed logfile priority from LOG_DEBUG to LOG_NOTICE (if NDEBUG).

	* munge.spec, config/Make-rpm.mk:
	  Changed tarball suffix from ".tgz" to ".tar.gz".

2004-03-24  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, config/x_ac_check_pthreads.m4,
	  config/x_ac_reentrant.m4, src/munged/Makefile.am:
	  Added configure test to determine how to link against pthreads.

	* src/munged/crypto_thread.c, src/munged/crypto_thread.h:
	  Removed ifdef for HAVE_LIBPTHREAD.

2004-03-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c, src/munge/unmunge.c, src/munged/conf.c:
	  Minor tweaks for FreeBSD 4.8.

2004-03-18  Chris Dunlap  <cdunlap@llnl.gov>

	* bootstrap: Force replacement of existing bootstrap-related files.

	* config/mkinstalldirs: Updated with latest version from automake-1.8.

	* config/compile, config/config.guess, config/config.sub,
	  config/depcomp, config/install-sh, config/ltmain.sh, config/missing:
	  Nuked and updated with latest versions via the bootstrap script.
	  Fixes bug where the ".so" suffix disappeared from shared lib names.

2004-03-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.3, libtool-1.5.2.

2004-03-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c, src/munged/conf.c,
	  src/munged/cred.c: Added dead store removal protection (ie, memburn).

	* src/munge/read.c(read_data_from_file): Removed unnecessary memset().

2004-03-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/zip.c:
	  Fixed gcc 3.3.3 (Debian 20040306) compiler warnings under "-O2".

	* configure.ac, config/x_ac_reentrant.m4, src/munged/Makefile.am:
	  Moved _REENTRANT to top-level "config.h".

2004-03-11  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_check_cond_lib.m4, config/x_ac_check_peercred.m4,
	  config/x_ac_debug.m4, config/x_ac_gpl_licensed.m4,
	  config/x_ac_humor.m4, config/x_ac_meta.m4: Reformatted.

	* src/munged/Makefile.am: Added _REENTRANT def to munged CFLAGS.

	* configure.ac, config/x_ac_ltlibobjs.m4:
	  Removed munging of LIBOBJS & LTLIBOBJS for automake & libtool.
	  Refer to autoconf docs 15.6.4: AC_LIBOBJ vs. LIBOBJS.

	* configure.ac, config/x_ac_check_cond_lib.m4, src/libcommon/common.h,
	  src/libcommon/munge_defs.h, src/libcommon/munge_msg.c,
	  src/libmunge/decode.c, src/libmunge/munge.h, src/libmunge/strings.c,
	  src/munged/Makefile.am, src/munged/conf.c, src/munged/cred.c,
	  src/munged/cred.h, src/munged/dec_v1.c, src/munged/enc_v1.c,
	  src/munged/zip.c, src/munged/zip.h: Added support for compression.

	* src/munged/replay.c(replay_insert): Changed return codes.

	* config/x_ac_meta.m4: Added test for META file existence.

2004-03-05  Chris Dunlap  <cdunlap@llnl.gov>

	* config/ac_check_peercred.m4, config/ac_debug.m4,
	  config/ac_gpl_licensed.m4, config/ac_humor.m4,
	  config/ac_ltlibobjs.m4, config/ac_meta.m4:
	  Renamed to config/x_ac_*.m4 to prevent future potential
	  conflicts in the autoconf variable namespace.

	* config/ac_check_peercred.m4, config/ac_humor.m4:
	  Added autoconf caching support.

2004-03-04  Chris Dunlap  <cdunlap@llnl.gov>

	* README, munge.spec: Updated description.

2004-03-01  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c:
	  Ignore EPIPE when closing output streams.

2004-02-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/str.c, src/libcommon/str.h:
	  Removed strdump().  Added strhex().

2004-02-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/encode.c, src/munge/read.c, src/munged/base64.c,
	  src/munged/base64.h, src/munged/cipher.c, src/munged/cipher.h,
	  src/munged/mac.c, src/munged/mac.h, src/munged/md.c, src/munged/md.h:
	  Pedantic tweaks for AIX compiler.

2004-01-30  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth.c: Added support for getpeereid().

	* src/libmunge/ctx.c, src/libmunge/msg_client.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/munged.c:
	  Tweaked includes for FreeBSD 4.8.

	* configure.ac, config/ac_check_peercred.m4: Added checks for
	  HAVE_GETPEEREID, HAVE_SO_PEERCRED, and HAVE_STRUCT_STRRECVFD.

	* config/ac_debug.m4:
	  Replaced obsolete AC_HELP_STRING with AS_HELP_STRING.

2004-01-29  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/msg_client.c, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/conf.c, src/munged/sock.c:
	  Tweaked for compiler warnings under AIX 5.1.

	* src/libcommon/munge_msg.h, src/munged/conf.h, src/munged/cred.h:
	  Replaced <stdint.h> with <inttypes.h> based on info from the
	  autoconf doc (section 5.6.1: Portability of Headers).

2004-01-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.2, libtool-1.5.2.

2004-01-27  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/str.c, src/libcommon/str.h: Added memburn().

2004-01-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/license.c: Updated copyright date range.

	* src/libcommon/munge_defs.h, src/libcommon/munge_msg.c
	  src/libcommon/munge_msg.h, src/libmunge/ctx.c,
	  src/libmunge/ctx.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/libmunge/msg_client.c,
	  src/libmunge/munge.h, src/munge/unmunge.c, src/munged/cred.c,
	  src/munged/cred.h, src/munged/dec_v1.c, src/munged/enc_v1.c,
	  src/munged/msg_server.c, src/munged/msg_server.h:
	  Changed protocol between client (libmunge) and server (munged)
	  to allow credential data & metadata to be returned on error.

	* src/munge/unmunge.c(display_meta):
	  Added check for errors on the file stream "fp_meta".

2003-12-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/msg_server.c(munge_msg_server_thread):
	  Fixed _munge_msg_recv() error from getting logged twice.

	* src/libcommon/munge_msg.c(_munge_msg_send, _munge_msg_recv):
	  Fixed error conditions that were not errno conditions.

2003-12-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c(_munge_msg_send):
	  Changed to use gather-writes.

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 128 to 256.

2003-11-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.57, automake-1.7.9, libtool-1.5.0a.

	* src/libcommon/munge_defs.h, src/munged/Makefile.am,
	  src/munged/conf.c, src/munged/cred.h, src/munged/dec_v1.c,
	  src/munged/hash.c, src/munged/hash.h, src/munged/munged.c,
	  src/munged/replay.c, src/munged/replay.h, src/munged/thread.c,
	  src/munged/thread.h, src/munged/timer.c, src/munged/timer.h:
	  Added support for replay detection/prevention.

2003-10-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.57, automake-1.7.8, libtool-1.5.0a.

	* src/etc/Makefile.am: Added support for /etc/init.d/ (Debian).

2003-10-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.

2003-10-14  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/random.c:
	  Changed RANDOM_SEED_DEFAULT from "/dev/random" to "/dev/urandom".

	* src/munged/dec_v1.c(dec_v1_unpack_inner):
	  Fixed unaligned access on ia64 {gnats:303}.

	* src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Fixed ia64 compiler warning that time_t "comparison is always false
	  due to limited range of data type".

2003-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v1_format.txt, src/libcommon/munge_defs.h,
	  src/libmunge/ctx.c, src/libmunge/decode.c, src/libmunge/encode.c,
	  src/libmunge/munge.h, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/conf.c, src/munged/conf.h, src/munged/dec_v1.c,
	  src/munged/enc_v1.c: Added TTL back into credential (for replay).

	* src/libcommon/fd.c: Tweaked formatting.

2003-07-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c: Augmented err msgs once again.

2003-07-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 64 to 128.

2003-06-27  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c:
	  Augmented err msgs with strerror() to track down failed fd_write_n().

2003-06-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c(create_conf):
	  Changed default value for got_clock_skew flag to true.

2003-06-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c(_munge_msg_recv):
	  Fixed bug with unexpected message length assert.

2003-05-30  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential-v1-format: Added.

2003-05-29  Chris Dunlap  <cdunlap@llnl.gov>

	* libcommon/munge_defs.h: Increased credential's salt from 56b to 64b.

	* src/libcommon/munge_msg.h, src/libmunge/ctx.c, src/libmunge/ctx.h,
	  src/libmunge/decode.c, src/libmunge/encode.c, src/libmunge/munge.h,
	  src/munge/unmunge.c, src/munged/conf.c, src/munged/conf.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/munged.c:
	  Added IP address where cred was encoded into the credential.
	  This breaks backwards-compatibility with existing credentials.
	  Added MUNGE_OPT_ADDR4 enum (and tweaked the enum values).

2003-05-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h: Update docs for munge_decode() to reflect
	  that an additional NUL is appended to the returned buffer.

	* src/munge/munge.c, src/munge/unmunge.c:
	  Changed manner in which strtol() is checked for error.

	* src/libmunge/msg_client.c(_munge_msg_client_connect):
	  Changed client's connect() retry backoff from exponential to linear.

	* src/munged/munged.c(segv_handler): Added.

2003-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 10 to 64.

	* src/libcommon/log.c, src/libcommon/log.h:
	  Added log_errno().  All callers changed.

2003-05-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c(dec_v1_validate_time):
	  Added a minimum negative clock skew of 1 second, since we were
	  encountering EMUNGE_CRED_REWOUND in spite of NTP's best efforts.

2003-05-06  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added support for the "--enable-debug" configure script option.

	* src/etc/munge.init, src/libcommon/munge_defs.h, src/munged/conf.c,
	  src/munged/munged.c: Added munged F cmdline opt and daemon support.

	* src/munged/random.c(random_init): Added "seeding in progress" msg.

2003-05-03  Chris Dunlap  <cdunlap@llnl.gov>

	* HISTORY: Added.

	* src/munged/msg_server.c(err_v1_process_msg):
	  Fixed sending err msg with no body, but need to revisit this routine.

2003-05-02  Chris Dunlap  <cdunlap@llnl.gov>

	* : Removed dprintf() due to an interpositioning bug with a
	  GNU extension function named dprintf() -- who knew?!?

	* : Read PACKAGE/VERSION info from META file.

	* src/munge/munge.c, src/munge/unmunge.c, src/munged/conf.c:
	  Added V cmdline opt.

	* src/munge/unmunge.c(main): Fixed invalid read of free'd memory.

	* src/libmunge/decode.c(decode_rsp_v1):
	  Fixed dataless cred decode to match header (ie, no data is malloc'd).
	  Fixed overwrite of returned data buffer.

2003-04-30  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.

	* munge.spec: Tweaked description, pre/post/preun/postun, files.

	* : Added 'distclean-local' hook via Make-inc.mk.

	* : Added startup script.

2003-04-29  Chris Dunlap  <cdunlap@llnl.gov>

	* : Fixed compiler warnings under RH62 w/o -Wall.

2003-04-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h, src/libmunge/strings.c, src/munged/enc_v1.c,
	  src/munged/lookup.c: Removed "half-mac" work-in-progress.

	* src/munge/munge.c, src/munge/unmunge.c: Tweaked "list" output.

	* src/munge/munge.c: Added c/C/m/M/z/Z cmdline opts.

	* src/munge/unmunge.c: Added t cmdline opt for setting TTL.
	  Added ENCODED, DECODED, CIPHER, MAC, ZIP metadata keys.

	* src/libmunge/munge.h, src/libmunge/ctx.c: Tweaked MUNGE_OPT_* enums.

	* src/libmunge/Makefile.am, src/libmunge/Makefile.in,
	  src/libmunge/strings.c: Added descriptive string arrays for enums.

2003-04-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/unmunge.c: Changed t/T cmdline opts to k/K.

2003-04-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c: Ensured MUNGE_TTL_FOREVER never expires.

	* libcommon/munge_defs.h: Reduced credential's salt from 64b to 56b.

	* src/libmunge/decode.c, src/libmunge/encode.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c: Removed credential's TTL field.

	* : Cleanup of error propagation code.

2003-04-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.h, src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Changed cred's realm_len from uint32_t to uint8_t.

2003-04-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/conf.c:
	  Temporarily added MUNGED_RANDOM_SEED and MUNGED_SECRET_KEY defs.

	* src/libmunge/ctx.c, src/libmunge/munge.h, src/munge/munge.c:
	  Renamed munge_ctx_err() to munge_ctx_strerror().

	* : Committed munge_decode() support.

	* src/munged/md.c: Changed md_size() to return 0 on NULL ptr.
	* src/munged/mac.c: Changed mac_size() to return 0 on NULL ptr.
	* src/munged/cipher.c: Changed cipher_block_size(), cipher_iv_size(),
	  and cipher_key_size() to return 0 on NULL ptr.

	* src/munged/cipher.h: Added CIPHER_DECRYPT & CIPHER_ENCRYPT enums.

	* src/libcommon/str.c, src/libcommon/str.h: Added strdump().

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_CRED_PREFIX & MUNGE_CRED_SUFFIX.

2003-04-08  Chris Dunlap  <cdunlap@llnl.gov>

	* : Committed munge_encode() support.

2003-02-18  Chris Dunlap  <cdunlap@llnl.gov>

	* : Changed #ifdef/#ifndef to #if where appropriate.

2003-02-16  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added GPL_LICENSED preprocessor macro support.

2003-02-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added munge/unmunge cmdline progs.

2003-02-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.c, src/libmunge/munge.h:
	  Tweaked API for munge_encode() and munge_decode().

2002-12-20  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.0.

