2010-08-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/job.c (job_accept): Added strerror() to err msg for
	  fd_set_nonblocking() failure.

2010-08-25  Chris Dunlap  <cdunlap@llnl.gov>

	* : Fixed potential deadlock in munged that can occur if clients block
	  while sending data (issue 1).  The wrappers for read() & write()
	  implement a timeout by preceding the read/write call with a poll().
	  The writev() coalescing of the message header & body has been
	  replaced with two separate fd_timed_write_n()s (for simplicity).
	  The client socket has been made nonblocking.	And the m_msg_send()
	  check for max message length has been moved up to before the
	  write()s.  Unfortunately, this commit degrades throughput by 20%.
	* src/libcommon/m_msg.c (m_msg_send, m_msg_recv): Added support for
	  timing-out sent messages with fd_timed_write_n() and received
	  messages with fd_timed_read_n().
	* src/libcommon/m_msg.c (_get_timeval): Added.
	* src/libcommon/fd.c (fd_timed_read_n, fd_timed_write_n): Added.
	* src/libcommon/fd.h: Added new prototypes.
	* src/libcommon/munge_defs.h: Added MUNGE_SOCKET_TIMEOUT_MSECS.
	* src/munged/job.c (job_accept): Set client socket as nonblocking.

2010-07-14  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/libmunge/m_msg_client.c,
	  src/munged/conf.c, src/munged/conf.h,
	  src/munged/dec.c, src/munged/enc.c:
	  Renamed MUNGE_REPLAY_RETRY_FLAG to MUNGE_SOCKET_RETRY_FLAG.
	  Renamed MUNGE_SOCKET_XFER_ATTEMPTS to MUNGE_SOCKET_RETRY_ATTEMPTS.
	  Renamed MUNGE_SOCKET_XFER_USLEEP to MUNGE_SOCKET_RETRY_USECS.
	  Renamed got_replay_retry to got_socket_retry in struct conf.

	* src/libcommon/munge_defs.h, src/munged/replay.c:
	  Renamed MUNGE_REPLAY_PURGE_TIMER to MUNGE_REPLAY_PURGE_SECS.

	* src/libcommon/munge_defs.h, src/munged/conf.c:
	  Renamed MUNGE_GROUP_UPDATE_TIMER to MUNGE_GROUP_UPDATE_SECS.
	* src/munged/conf.c, src/munged/conf.h, src/munged/munged.c:
	  Renamed gids_interval to gids_update_secs in struct conf.

	* src/munged/conf.h: Tweaked struct conf comment for def_ttl & max_ttl.

2010-07-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.3.in: Tweaked munge(3) manpage name.

	* config/x_ac_check_pthreads.m4: Tweaked description.

2010-05-23  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v3_format.txt: Twiddled quote marks.

	* README: Tweaked usage text.

2010-05-19  Chris Dunlap  <cdunlap@llnl.gov>

	* README, src/libcommon/munge.7.in: Updated overview text,
	  breaking OVERVIEW section into USAGE and DETAILS.

2010-04-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated homepage URL.

2010-03-23  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.9.

	* HISTORY, META, NEWS: Updated for 0.5.9 release.

	* PLATFORMS: Added kernel release info for GNU/kFreeBSD.

	* config/x_ac_select_auth_method.m4, PLATFORMS: Renamed Solaris
	  references to SunOS in order to be consistent with uname output.

	* config/config.guess, config/config.sub:
	  Updated via autotools-dev-20100122.1.

	* src/etc/munge.sysconfig: Removed svn id keyword.

	* Makefile.am, src/Makefile.am, src/etc/Makefile.am,
	  src/libcommon/Makefile.am, src/libmissing/Makefile.am,
	  src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am, config/Make-inc.mk:
	  Added copyleft boilerplate.

2010-03-16  Chris Dunlap  <cdunlap@llnl.gov>

	* PLATFORMS: Updated.

	* README: Added license info.

2010-03-15  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_select_auth_method.m4: Tweaked platform comment for
	  AUTH_METHOD_LOCAL_PEERCRED.

2010-03-11  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Tweaked formatting.

	* config/x_ac_select_auth_method.m4: Tweaked platform comment for
	  AUTH_METHOD_LOCAL_PEERCRED.

	* config/x_ac_select_auth_method.m4: Fixed check for struct xucred to
	  work on FreeBSD-4.7 with the addition of <sys/param.h> and
	  <sys/types.h>.

2010-03-10  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_check_fifo_recvfd.m4, config/x_ac_check_so_peercred.m4:
	  Tweaked formatting.

	* configure.ac: Fixed check for socklen_t to work on FreeBSD-4.7 with
	  the addition of <sys/types.h>.
	* config/x_ac_check_local_peercred.m4, src/munged/auth_recv.c:
	  Added <sys/un.h> for LOCAL_PEERCRED define on FreeBSD-4.7.
	  Added <sys/param.h> for NGROUPS on FreeBSD-4.7 (needed for ucred.h).
	  Note that, by default, AUTH_METHOD_GETPEEREID is selected on FreeBSD;
	  however, AUTH_METHOD_LOCAL_PEERCRED also works there since supposedly
	  its getpeereid() is implemented via LOCAL_PEERCRED.

2010-03-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c, src/munged/job.c: Changed type of global "done"
	  signal handler flag to volatile sig_atomic_t.  Moved exit_handler()'s
	  log_msg() call outside of signal handler and into job_accept().

2010-03-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Added stanza to service_start() to create
	  /var/run/munge dir if needed.  Fixes bug on Debian/Ubuntu when RAMRUN
	  is enabled.

2010-03-02  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_select_auth_method.m4: Tweaked whitespace.

	* : Changed license from GPLv2+ to GPLv3+/LGPLv3+.

2010-02-11  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4: Tweaked AC_MSG_RESULT text on failure.

	* config/x_ac_select_crypto_lib.m4:
	  Tweaked AC_MSG_RESULT text on failure.

	* : Moved the compile-time checks for determining the client
	  authentication method into the configure script.
	* configure.ac, config/x_ac_select_auth_method.m4:
	  Added X_AC_SELECT_AUTH_METHOD.
	* config/x_ac_check_fifo_recvfd.m4: Moved check for struct strrecvfd
	  into config/x_ac_select_auth_method.m4 since it is required for both
	  AUTH_METHOD_RECVFD_MKFIFO & AUTH_METHOD_RECVFD_MKNOD.
	* src/libcommon/auth_policy.h, src/libcommon/common.h,
	  src/libcommon/Makefile.am: Removed "auth_policy.h".
	* src/libmunge/auth_send.c, src/munged/auth_recv.c, src/munged/conf.c:
	  Replaced MUNGE_AUTH_* defs with corresponding AUTH_METHOD_* defs.

	* src/libmunge/auth_send.h: Changed #ifdef guard to MUNGE_AUTH_SEND_H.
	* src/munged/auth_recv.h: Changed #ifdef guard to MUNGE_AUTH_RECV_H.

	* configure.ac, config/x_ac_gpl_licensed.m4: Removed X_AC_GPL_LICENSED.
	* src/libmunge/munge.h: Removed #error if !GPL_LICENSED.
	* src/libmunge/munge.3.in, src/libmunge/munge_ctx.3.in,
	  src/libmunge/munge_enum.3.in: Removed references to GPL_LICENSED.

	* configure.ac: Added check for struct ucred in <sys/socket.h>.
	* src/libcommon/auth_policy.h: Added test for HAVE_STRUCT_UCRED to
	  MUNGE_AUTH_SO_PEERCRED client authentication check.

	* configure.ac, config/x_ac_check_so_peercred.m4:
	  Renamed from config/x_ac_check_peercred.m4.
	* src/libcommon/auth_policy.h, src/munged/auth_recv.c:
	  Renamed MUNGE_AUTH_PEERCRED to MUNGE_AUTH_SO_PEERCRED.

2010-02-10  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, config/x_ac_check_local_peercred.m4:
	  Added X_AC_CHECK_LOCAL_PEERCRED.  Added check for struct xucred in
	  <sys/ucred.h>.
	* src/libcommon/auth_policy.h, src/munged/auth_recv.c (auth_recv):
	  Added MUNGE_AUTH_LOCAL_PEERCRED client authentication support for
	  Debian GNU/kFreeBSD systems.

	* configure.ac: Replaced AC_GNU_SOURCE with AC_USE_SYSTEM_EXTENSIONS
	  per autoupdate.

	* : Re-bootstrap'd with autoconf-2.65, automake-1.11.1, libtool 2.2.6b.

	* : Updated copyright date range.

2009-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Applied patch from Petter Reinholdtsen
	  <pere@hungry.com> to correct LSB run-time dependencies
	  <http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=541238>.
	  Note that LSB runlevels were removed by an earlier change to
	  prevent the daemon from being started by default on Fedora/RedHat.

2009-08-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c: Re-ordered functions.

2009-08-04  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Tweaked comments.

	* src/libcommon/log.c: Added initializer for log_ctx.id.

	* src/libcommon/log.c (_log_aux): Replaced timestamp code w/ strftimet.

	* src/libcommon/str.c (strftimet): Added.
	* src/libcommon/str.h: Added strftimet() prototype.  Tweaked comments.

2009-07-30  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Added comment describing latest attack
	  against 11-round AES-256 in 2^70 time.

2009-07-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c (parse_cmdline),
	  src/munge/remunge.c (parse_cmdline),
	  src/munge/unmunge.c (parse_cmdline),
	  src/munged/conf.c (parse_cmdline):
	  Renamed opt_string to short_opts, opt_table to long_opts.

	* src/munge/munge.c (parse_cmdline),
	  src/munge/remunge.c (parse_cmdline),
	  src/munge/unmunge.c (parse_cmdline),
	  src/munged/conf.c (parse_cmdline):
	  Added case for missing option argument.

2009-06-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/enum.c (munge_enum_str_to_int),
	  src/munge/munge.c (parse_cmdline),
	  src/munge/remunge.c (parse_cmdline),
	  src/munged/conf.c (parse_cmdline):
	  Added additional checks for strtol() & strtoul().

2009-05-04  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Added AC_GNU_SOURCE macro (note that it is called
	  before any macros that run the C compiler).  As of glibc 2.8, the
	  _GNU_SOURCE feature test macro must be defined in order to obtain the
	  ucred struct definition.

2009-04-27  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.61, automake-1.10.1.

	* configure.ac: Added AM_PROG_CC_C_O for compiling auth_recv.c with
	  per-target flags.

2009-04-23  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright date range.

	* src/munge/munge.1.in, src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Changed "--socket string" to "--socket path".

	* src/etc/munge.init.in: Swapped order of CONFIG & DAEMON_ARGS vars.

2009-04-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Changed LSB Default-Start / Default-Stop and
	  chkconfig runlevels so daemon is not started by default.

2008-12-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c (_gids_uid_alloc): Added check for valid 'user'.

	* src/munged/gids.c (_gids_uid_alloc): Updated usage comment.

	* src/munged/gids.c (_gids_hash_create): Added guard for processing
	  results of getgrent() to avoid dereferencing gr_mem if NULL.

	* src/munged/gids.c (_gids_hash_create): Added strerror() to log msg
	  for getgrent() failure.

	* src/munged/gids.c (_gids_hash_create): Added 'do_group_db_close'
	  guard var for endgrent() in 'err' path.

	* src/munged/gids.c (_gids_update): Restructured in order for the gids
	  mutex to be locked/unlocked only once instead of twice per call.

2008-08-14  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/m_msg.c, src/libmunge/encode.c, src/munged/dec.c,
	  src/munged/enc.c, src/munged/munged.c: Removed unnecessary header
	  includes.

	* src/libmissing/inet_ntop.h, src/munged/conf.c, src/munge/unmunge.c:
	  Moved <arpa/inet.h> header include into "inet_ntop.h" #if/#else.

2008-07-01  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.61, automake-1.10.

	* configure.ac, config/config.h.in,
	  src/libcommon/munge_defs.h, src/libmunge/enum.c,
	  src/libmunge/munge.h, src/libmunge/munge_ctx.3.in, src/munged/md.c:
	  Added support for MUNGE_MAC_SHA512.

	* doc/credential_v3_format.txt: Added additional details to the steps
	  in which credentials are encoded.

2008-01-30  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/path.h: Added missing #include.

	* src/munged/path.c (path_dirname): Changed behavior to return EINVAL
	  error if src is NULL.

2008-01-29  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/ctx.c (munge_ctx_create): Fixed bug where
	  ctx->error_str could be read before it was initialized.

	* src/libcommon/str.c, src/libcommon/str.h (strcatf):
	  Fixed bug where strcatf()'s size_t return type prevented the error
	  code of -1 from being returned to the caller.
	* src/munged/crypto.c (openssl_log_msg):
	  Specified void cast to discard return value from strcatf().

2008-01-28  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c (_gids_hash_create, _gids_user_to_uid):
	  Fixed bug where _gids_user_to_uid() returned a signed int identifying
	  the uid (on success) or -1 (on error).  This value was first assigned
	  directly to an unsigned uid_t and then tested for error.  But since
	  the var was unsigned, the test would always eval to true.

2008-01-09  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright date range.

2007-10-10  Chris Dunlap  <cdunlap@llnl.gov>

	* DISCLAIMER.LLNS, DISCLAIMER.UC: Updated.

2007-10-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Updated to conman r806.
	  Added support for Debian Etch & Ubuntu Edgy.
	  Renamed OPTIONS to DAEMON_ARGS.  Renamed SERVICE_NAME to SCRIPT_NAME.
	  Redirected ERRMSG to stderr.  Forced removal of PIDFILE on stop.
	  Replaced query_exec() with type.  Added log_init() and log_fini().
	  Added check for "dead" status if process not found & pidfile exists.
	* src/etc/munge.sysconfig: Renamed OPTIONS to DAEMON_ARGS.

2007-10-05  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright info for LLNS.

2007-10-03  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Added openssl-devel, bzip2-devel, and zlib-devel
	  BuildRequires for mock builds.

2007-09-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Fixed bug with RH_SUBSYS referencing the init
	  script name instead of the executable daemon name.

	* src/etc/munge.init.in: Fixed bug with SERVICE_NAME not removing the
	  leading /[SK][0-9]+/, thereby causing the sysconfig file to be
	  ignored at boot (when referenced via "/etc/rc5.d/S40munge").

2007-04-04  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am: Fixed bug in install-data-local target that
	  caused installation of munge.sysconfig to be considered new if
	  munge.init had changed.

	* src/etc/Makefile.am: Changed munge.sysconfig install perms to 0644.

2007-02-05  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.8.

	* TODO: Updated.

	* HISTORY, META, NEWS: Updated for 0.5.8 release.

2007-02-03  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright date range.

	* src/munged/cipher.c (HAVE_LIBGCRYPT:_cipher_init): Fixed cast
	  causing stack corruption and overwriting 'algo' on amd64.

2006-12-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/cipher.c (_cipher_update): Fixed compiler warning that
	  initialization discards qualifiers from pointer target type.

2006-12-25  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS: Tweaked capitalization.

2006-12-23  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS: Tweaked wording of 0.5.7 release notes.

	* : Released 0.5.7.

	* HISTORY, META, NEWS: Updated for 0.5.7 release.

2006-12-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/crypto.c (crypto_fini, _openssl_thread_dynlock_destroy):
	  Changed pthread_mutex_destroy() error to be nonfatal.
	* src/munged/gids.c (gids_destroy): Changed pthread_mutex_destroy()
	  error to be nonfatal.
	* src/munged/work.c (work_fini): Changed pthread_cond_destroy() and
	  pthread_mutex_destroy() errors to be nonfatal.

2006-12-21  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS, src/munged/conf.c, src/munged/munged.8.in:
	  Changed --check-group-mtime to --group-check-mtime.

	* src/munged/gids.c: Added gids map timing information to log message.

	* HISTORY, META, NEWS: Updated for 0.5.7 release.

2006-12-20  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c (_gids_dump_uid_hash): Tweaked debug table header.

	* src/munged/gids.c: Removed the need for casting the gids hash key
	  uid_t to a gid_t by making the gids hash return a struct gids_head
	  that points to a singly-linked list of struct gids_nodes.

	* src/munged/munged.8.in: Tweaked notes section.

2006-12-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.8.in: Tweaked docs for --group-update-time.

	* src/munged/conf.c:
	  Added --check-group-mtime and --group-update-time.
	* src/munged/munged.8.in:
	  Documented --check-group-mtime and --group-update-time.
	* src/munged/gids.c (gids_create): Added log messages.
	* src/munged/gids.h: Added GIDS_GROUP_FILE from gids.c.
	* src/munged/munged.c (main): Moved gids_create() lower.

	* src/libcommon/munge_defs.h: Tweaked comment.

	* src/libcommon/munge_defs.h:
	  Renamed MUNGE_GROUP_PARSE_TIMER to MUNGE_GROUP_UPDATE_TIMER.
	* src/munged/conf.c (create_conf):
	  Changed MUNGE_GROUP_PARSE_TIMER to MUNGE_GROUP_UPDATE_TIMER.

	* src/munged/munged.c (main): Moved handle_signals() to after
	  daemonize_init().
	* src/munged/munged.c (hup_handler): Added to invoke gids_update().
	* src/munged/gids.h: Changed prototype for gids_create().
	  Added gids_update().
	* src/munged/gids.c (gids_create): Initialized timer, interval, and
	  do_group_stat vars that were added to struct gids.
	* src/munged/gids.c (gids_update): Added public function to schedule
	  an immediate update.
	* src/munged/gids.c (_gids_update): Set do_group_stat flag to -1 on
	  stat() error, and resurrect it in gids_update() if enabled.
	* src/munged/conf.c (create_conf): Set conf flags via "!!" to ensure
	  proper boolean coversions.
	* src/munged/munged.8.in: Documented signals.
	* src/libcommon/munge_defs.h: Tweaked MUNGE_GROUP_STAT_FLAG docs.

2006-12-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c: Added caching of uids from getpwnam().
	* src/munged/gids.h: Added UIDS_HASH_SIZE define.

	* : Added support for supplemental group info to be computed only once
	    or never.
	* src/libcommon/munge_defs.h:
	  Changed MUNGE_GROUP_PARSE_TIMER from 900 seconds to 3600 seconds.
	* src/munged/conf.h: Added gids_interval to struct conf.
	* src/munged/conf.c (create_conf): Initialized gids & gids_interval.
	* src/munged/gids.h: Tweaked gids_create() documentation.
	* src/munged/gids.c: Added support for GIDs mapping to be computed
	  only once if interval=0, and skipped altogether if interval=-1.

2006-12-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/log.c (log_err, log_errno): Replaced magic number 1024
	  with LOG_BUFFER_MAXLEN define.

	* src/munged/munged.c (daemonize_init): Disabled "daemonize" pipe in
	  parent process after initial fork().

2006-12-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec.c: Added missing stdlib.h & time.h #includes.

	* src/libmunge/munge_ctx.3.in: Renamed "COMPRESSION TYPES" section
	  header to "ZIP TYPES".

	* src/munged/munged.8.in: Fixed Description section to reflect the
	  changes introduced with the v3 credential format where compression
	  now takes place before the MAC calculation.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/libmunge/munge_enum.3.in,
	  src/munge/munge.1.in, src/munge/remunge.1.in, src/munged/munged.8.in:
	  Minor formatting, grammar, and spelling tweaks.

2006-12-01  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v3_format.txt: Added comment specifying encryption
	  uses PKCS #5 padding.

2006-11-23  Chris Dunlap  <cdunlap@llnl.gov>

	* BUGS, TODO: Updated.

2006-11-22  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS: Tweaked wording of 0.5.6 release notes.

	* : Released 0.5.6.

	* HISTORY, META, NEWS: Updated for 0.5.6 release.

	* src/munged/auth_recv.h, src/munged/conf.h, src/munged/crypto.h,
	  src/munged/thread.h: Tweaked formatting.

	* src/munged/cred.h: Removed evp.h include to fix bug causing build
	  using Libgcrypt to fail without OpenSSL headers.

2006-11-14  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.5.

	* BUGS, HISTORY, META, NEWS, PLATFORMS: Updated for 0.5.5 release.

	* src/libmunge/munge.h: Tweaked comments.

	* src/munged/cipher.c (HAVE_OPENSSL:_cipher_map_enum),
	  src/libmunge/enum.c: Made AES-256 support dependent upon SHA-256
	  since the 256-bit cipher key length can currently only be satisfied
	  by a 256-bit message digest.

2006-11-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/cipher.c (HAVE_LIBGCRYPT:_cipher_final): Changed so
	  memcpy() of decrypted plaintext only occurs if data exists after
	  PKCS #5 block padding has been removed.

	* src/munged/cipher.c, src/munged/mac.c, src/munged/md.c:
	  Added log_msg()s at LOG_DEBUG to investigate infrequent "Unable to
	  encrypt credential" errors when using the blowfish cipher with
	  Libgcrypt.  The bug is generated by gcry_cipher_setkey() returning a
	  "Weak encryption key" error string.  Googling around turns up a post
	  by Christian Grothoff saying "This is a (forgotten) problem with
	  libgcrypt.  The crypto library insists on checking that the key for
	  the blowfish cypher is 'secure'."  Krista Bennett then reports that
	  "The libgcrypt weak encryption key bug has been fixed in CVS."

	* config/x_ac_path_openssl.m4:
	  Added /usr/sfw to _x_ac_path_openssl_dirs for Solaris.

	* configure.ac: Fixed type check for CRYPTO_dynlock so OpenSSL-specific
	  CFLAGS are included.

	* src/munged/cipher.c (HAVE_OPENSSL:_cipher_map_enum): Fixed compiler
	  warning "assignment discards qualifiers from pointer target type".
	* src/munged/md.c (HAVE_OPENSSL:_md_map_enum): Fixed compiler warning
	  "assignment discards qualifiers from pointer target type".

	* src/munged/mac.c, src/munged/mac.h:
	  Renamed struct mac_ctx len var to diglen.
	* src/munged/md.c, src/munged/md.h:
	  Renamed struct md_ctx len var to diglen.

2006-11-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/cipher.c (HAVE_LIBGCRYPT:_cipher_update):
	  Tweaked assertions.  Updated documentation.
	* src/munged/cipher.c (HAVE_LIBGCRYPT:_cipher_final):
	  Tweaked assertions.

	* src/munged/cipher.c (cipher_update, cipher_final):
	  Added check for valid dstlen.

	* src/munged/mac.c (mac_init): Changed so assert assignments are only
	  made if _mac_init() succeeds.
	* src/munged/md.c (md_init): Changed so assert assignments are only
	  made if _md_init() succeeds.

	* src/munged/random.h: Updated documentation for random_init().
	* src/munged/random.c (HAVE_LIBGCRYPT:_random_read_seed):
	  Fixed inner loop to process number of bytes read and exit on EOF.
	* src/munged/random.c (HAVE_LIBGCRYPT:_random_write_seed):
	  Tweaked var names to match HAVE_LIBGCRYPT:_random_read_seed().

	* src/munged/mac.h: Added len to struct mac_ctx.
	* src/munged/mac.c (mac_final): Added check for valid dstlen.
	* src/munged/mac.c (_mac_init): Set struct mac_ctx len var.
	* src/munged/mac.c (_mac_final): Added dstlen check to ensure mac will
	  not overflow dst buffer.
	* src/munged/mac.c (HAVE_LIBGCRYPT:_mac_block): Memset ctx when done.
	* src/munged/mac.c (HAVE_OPENSSL:_mac_block): Added dstlen check to
	  ensure mac will not overflow dst buffer.

2006-11-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/md.h: Added len to struct md_ctx.
	* src/munged/md.c (md_final): Added check for valid dstlen.
	* src/munged/md.c (md_copy): Copied struct md_ctx len var.
	* src/munged/md.c (_md_init): Set struct md_ctx len var.
	* src/munged/md.c (_md_final): Added dstlen check to ensure md will not
	  overflow dst buffer.

	* src/munged/md.c (md_cleanup): Removed unnecessary var initialization.

	* src/munged/crypto.c (crypto_init): Tweaked err msg verbage.

2006-11-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/enc.c (enc_mac): Reverted assertion after mac_final().

2006-11-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/enc.c (enc_validate_msg): Added check to ensure the MAC
	  would generate a DEK of sufficient length for the cipher.
	* src/munged/dec.c (dec_unpack_outer): Added check to ensure the MAC
	  would generate a DEK of sufficient length for the cipher.
	* src/libmunge/munge_ctx.3.in: Updated documentation for
	  MUNGE_CIPHER_AES256 to note that it requires MUNGE_MAC_SHA256.

	* src/munged/conf.c (create_subkeys): Moved check for minimum length
	  of keyfile from _conf_open_keyfile() in order for it to be performed
	  on the number of bytes processed instead of the size of the file.

	* src/munged/random.c (HAVE_LIBGCRYPT:_random_read_seed):
	  Removed warning if seed does not exist.

	* src/munged/conf.c (_conf_open_keyfile): Added check for minimum
	  length of keyfile.
	* src/libcommon/munge_defs.h: Added MUNGE_MINIMUM_SECRET_KEY_LEN.

2006-11-01  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_select_crypto_lib.m4: Changed default crypto lib to
	  OpenSSL due to better performance.
	* QUICKSTART: Updated.

	* : Reduced memory requirements for replay cache.
	* src/libcommon/munge_defs.h: Added MUNGE_MINIMUM_MD_LEN.
	* src/munged/replay.c (replay_insert, replay_remove):
	  Changed replay_key.data.mac[] to only store the first
	  MUNGE_MINIMUM_MD_LEN bytes of the credential's MAC.

2006-10-31  Chris Dunlap  <cdunlap@llnl.gov>

	* TODO: Updated.

	* : Added support for MUNGE_CIPHER_AES256 and MUNGE_MAC_SHA256.
	* configure.ac, config/config.h.in: Added OpenSSL function checks for
	  EVP_aes_256_cbc() and EVP_sha256().
	* src/libcommon/munge_defs.h: Updated MUNGE_MAXIMUM_KEY_LEN and
	  MUNGE_MAXIMUM_MD_LEN.
	* src/libmunge/munge.h: Added enums for MUNGE_CIPHER_AES256 and
	  MUNGE_MAC_SHA256.  Renamed enum for MUNGE_CIPHER_AES_128 to
	  MUNGE_CIPHER_AES128.  Added MUNGE_CIPHER_AES_128 define for
	  backwards-compatibility.
	* src/libmunge/enum.c: Updated _munge_cipher_table[] and
	  _munge_mac_table[].
	* src/libmunge/munge_ctx.3.in: Documented MUNGE_CIPHER_AES256 and
	  MUNGE_MAC_SHA256.  Updated documentation for MUNGE_MAC_MD5 and
	  MUNGE_MAC_SHA1.
	* src/munged/cipher.c: Added support for MUNGE_CIPHER_AES256.
	* src/munged/md.c: Added support for MUNGE_MAC_SHA256.

2006-10-30  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added support for Libgcrypt.
	* src/munged/dec.c, src/munged/enc.c, src/munged/conf.c:
	  Updated calls from cipher.h, md.h, mac.h, and random.h.
	* src/munged/cipher.c, src/munged/cipher.h: Refactored routines into
	  static openssl routines.  Added static libgcrypt routines.  Added
	  cipher_map_enum() to replace lookup.c:lookup_cipher().  Changed
	  prototypes for cipher_init(), cipher_block_size(), cipher_iv_size(),
	  and cipher_key_size() to replace use of EVP_CIPHER with
	  munge_cipher_t.  Changed use of [dstlen] parm for cipher_update()
	  and cipher_final().
	* src/munged/md.c, src/munged/md.h: Refactored routines into static
	  openssl routines.  Added static libgcrypt routines.  Added
	  md_map_enum() to replace lookup.c:lookup_mac().  Changed prototypes
	  for md_init() and md_size() to replace use of EVP_MD with
	  munge_mac_t.  Changed use of [dstlen] parm for md_final().
	* src/munged/mac.c, src/munged/mac.h: Refactored routines into static
	  openssl routines.  Added static libgcrypt routines.  Added
	  mac_map_enum() to replace lookup.c:lookup_mac().  Changed prototypes
	  for mac_init(), mac_size(), and mac_block() to replace use of EVP_MD
	  with munge_mac_t.  Changed use of [dstlen] parm for mac_final() and
	  mac_block().
	* src/munged/random.c: Refactored routines into static openssl
	  routines.  Added static libgcrypt routines.
	* src/munged/munged.c: Replaced crypto_thread_init() with
	  crypto_init(), and crypto_thread_fini() with crypto_fini().
	* src/munged/crypto.c, src/munged/crypto.h: Added crypto_init() and
	  crypto_fini().  Refactored crypto_thread.c routines into static
	  openssl routines.  Added crypto_log.c:crypto_log_msg() routine as
	  openssl_log_msg().  Added static libgcrypt routines.
	* src/munged/crypto_log.c, src/munged/crypto_log.h,
	  src/munged/crypto_thread.c, src/munged/crypto_thread.h,
	  src/munged/lookup.c, src/munged/lookup.h: Removed.
	* src/libmunge/enum.c: Updated test for MUNGE_CIPHER_AES128_FLAG.
	* src/libcommon/munge_defs.h: Updated MUNGE_DEFAULT_CIPHER test for
	  libgcrypt.  Added MUNGE_MAXIMUM_BLK_LEN, MUNGE_MAXIMUM_KEY_LEN, and
	  MUNGE_MAXIMUM_MD_LEN.
	* src/munged/cred.h: Updated MAX_DEK, MAX_IV, and MAX_MAC to use new
	  munge_defs.h MUNGE_MAXIMUM_*_LEN defines.
	* src/munged/Makefile.am: Added $(CRYPTO_CFLAGS) and $(CRYPTO_LIBS).
	  Updated munged_SOURCES.
	* configure.ac: Added AM_PATH_LIBGCRYPT, X_AC_PATH_OPENSSL, and
	  X_AC_SELECT_CRYPTO_LIB.  Moved tests for OpenSSL into conditional
	  based on $(CRYPTO_PKG).
	* config/config.h.in: Added HAVE_LIBGCRYPT and HAVE_OPENSSL.
	* config/x_ac_arch.m4: Removed x_ac_cv_check_ssl_dir unsets.
	* config/x_ac_path_openssl.m4: Added to replace x_ac_check_ssl.m4.
	* config/x_ac_check_ssl.m4: Replaced by x_ac_path_openssl.m4.
	* config/x_ac_select_crypto_lib.m4: Added.
	* BUGS, QUICKSTART, TODO: Updated.

	* src/libmissing/Makefile.am: Replaced @LTLIBOBJS@ with $(LTLIBOBJS).

	* doc/credential_v3_format.txt: Added comment specifying encryption is
	  performed in cipher block chaining mode.

2006-10-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.sysconfig: Tweaked commented OPTIONS var.

2006-10-01  Chris Dunlap  <cdunlap@llnl.gov>

	* README, src/libcommon/munge.7.in: Changed header name.

2006-09-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.4.

	* HISTORY, META, NEWS: Updated for 0.5.4 release.

	* src/etc/munge.init.in (signal_process): Replaced use of return code
	  from second kill with another query_pids.  This protects against the
	  first kill taking slightly too long and the second kill not finding
	  the process.

	* src/libcommon/log.c (_log_die): Changed "c" var type to "signed char"
	  since a char is unsigned on AIX.
	* src/munged/munged.c (daemonize_init): Changed "priority" var type to
	  "signed char" since a char is unsigned on AIX.

	* src/munged/auth_recv.c (_check_auth_client_dir):
	  Combined tests for write permissions and the sticky bit being set.

	* src/etc/munge.init.in (service_restart): Replaced negated conditional
	  with if/else since Solaris shell complains about commands starting
	  with "!".

	* src/munged/path.c, src/munged/path.h: Fixed bug on FreeBSD where
	  PATH_MAX was not being defined by "path.h".

	* src/etc/Makefile.am: Fixed installed directory ownership on
	  $(localstatedir) & $(localstatedir)/*.

2006-09-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am, src/libcommon/Makefile.am,
	  src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am: Fixed bug on AIX causing directories created
	  during "make install" to have wrong permissions inherited from umask.

	* src/munged/auth_recv.c (_check_auth_client_dir):
	  Added auth client dir ownership check.

	* BUGS, PLATFORMS, TODO: Updated.

	* README, munge.spec, src/libcommon/munge.7.in: Updated description.

	* QUICKSTART: Updated.

	* src/munged/munged.8.in: Updated info on --force cmdline opt.
	* src/munged/munged.c (write_pidfile): Added pidfile_name path checks.
	* src/munged/munged.c (open_logfile): Added logfile_name path checks.
	* src/munged/munged.c (sock_create): Added socket_name path checks.
	* src/munged/auth_recv.c (auth_recv_init):
	  Added auth_server_dir & auth_client_dir path checks via
	  _check_auth_server_dir() & _check_auth_client_dir().
	* src/munged/auth_recv.h: Updated prototype for auth_recv_init().
	* src/munged/conf.c (create_subkeys): Added key_name path checks
	  via _conf_open_keyfile().
	* src/munged/random.c (random_init): Added seed_name path checks.
	* src/munged/random.c (random_fini): Restricted umask as a precaution.
	* src/munged/Makefile.am: Added path.c & path.h.
	* src/munged/path.c, src/munged/path.h: Added.

2006-09-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge_enum.3.in, src/munge/munge.1.in,
	  src/munge/remunge.1.in: Fixed Lintian warning about
	  hyphen-used-as-minus-sign (Thanks to Gennaro Oliva).

2006-09-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Changed use of "expr" to "expr --" to prevent
	  next arg from potentially being treated as a cmdline option.

2006-09-04  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am: Fixed bug with unterminated line (ie, missing
	  semicolon) from previous commit.

2006-09-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am: Changed the install-data-local target so the
	  /etc/munge, /var/lib/munge, /var/log/munge, and /var/run/munge dirs
	  would be owned by "daemon" if the "make install" was done by root.

2006-09-01  Chris Dunlap  <cdunlap@llnl.gov>

	* README, munge.spec, src/libcommon/munge.7.in: Updated description.

	* src/etc/munge.init.in: Removed dependency on awk.

	* src/etc/Makefile.am: Changed the install-data-local target so the
	  installed munge.init and munge.sysconfig files would only be given
	  the ".new" suffix if the files already existed at the destination
	  and differed from the files about to be installed.

2006-08-31  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/auth_policy.h: Updated comment to add Darwin to the
	  list of platforms supporting getpeereid().

	* configure.ac, config/x_ac_darwin.m4: Added support for Darwin.
	  By defining _APPLE_C_SOURCE via configure, a different version of
	  certain pthread routines is used.  Without it, pthread_cond_wait()
	  is not recognized as a cancellation point; consequently, work_fini()
	  is unable to cancel the worker threads, and munged hangs on
	  pthread_join() at exit as a result.

2006-08-30  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Tweaked formatting.

	* src/libcommon/auth_policy.h: Updated comment regarding when
	  getpeereid() first appeared in FreeBSD.

	* src/etc/munge.init.in: Removed use of UID variable since RedHat
	  returns the error "UID: readonly variable".

	* munge.spec: Replaced use of "daemon" group with "root" group since
	  the daemon group does not exist on AIX by default.  The root group
	  does not exist there either, but RPM seems to quietly deal with it.

2006-08-29  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_arch.m4: Removed leftover code from previous commit.

	* README.AIX, munge.spec, config/x_ac_arch.m4: Fixed so 32-bit &
	  64-bit builds work on AIX without a gcc wrapper script setting either
	  "-maix32" or "-maix64".

	* munge.spec: Tweaked error messages.

2006-08-28  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Fixed aix5.3 %ifos/%ifnos lines to include os_compats.

	* munge.spec: Fixed so both shared & static libs are built on AIX.

	* munge.spec: Fixed so shared libs are built on AIX (ie, changed rpm
	  os define from "aix" to "aix5.3" so configure script would detect
	  support for building shared libs).

	* src/etc/munge.init.in: Replaced "id -u" with "id|sed" (for Solaris).

2006-08-24  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, src/libcommon/auth_policy.h, src/munged/auth_recv.c:
	  Added support for MUNGE_AUTH_GETPEERUCRED (Solaris 10).

	* configure.ac: Replaced nsl & socket X_AC_CHECK_COND_LIB with
	  AC_SEARCH_LIBS.  Moved X_AC_CHECK_SSL to after this check so LIBS
	  would include -lsocket & -lnsl if needed (eg, on Solaris).  Merged
	  check for inet_ntop with the rest of AC_REPLACE_FUNCS.
	* src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am: Removed use of LIBNSL & LIBSOCKET.

2006-08-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.3.in: Tweaked synopsis formatting.

2006-08-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.1.in, src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/libmunge/munge.3.in, src/libmunge/munge_ctx.3.in,
	  src/libmunge/munge_enum.3.in, src/libcommon/munge.7.in,
	  src/munged/munged.8.in: Added copyright boilerplate.

2006-08-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge.7.in: Updated description.

	* QUICKSTART: Updated.

2006-08-20  Chris Dunlap  <cdunlap@llnl.gov>

	* QUICKSTART: Updated.

	* README, munge.spec: Updated description.

2006-08-16  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated copyright date range.

2006-08-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Tweaked spacing.

	* src/etc/munge.init.in (service_restart): Changed so start would not
	  be attempted if preceding stop had failed.

	* src/etc/munge.init.in (service_start,service_stop): Replaced Debian's
	  "--oknodo" with test for "$0 status" since --oknodo would also mask
	  errors such as "operation not permitted".

	* Makefile.am: Replaced distclean-local target with DISTCLEANFILES.

	* src/etc/Makefile.am: Added munge.init to noinst_DATA, thereby adding
	  its dependency to the "all" target.

	* src/libcommon/log.c (_log_prefix): Changed priority prefixes to
	  mixed-case strings.

	* README, munge.spec: Updated description.

2006-07-27  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Changed the test for starting a service on
	  RedHat to mirror the test for stopping a service there.

	* src/libcommon/log.c (_log_die): Changed behavior to only return error
	  message across "daemonize" pipe if the logging fp is not set to
	  stderr in order to avoid having the message written to stderr first
	  by the grandchild process and again by the original parent process.

	* src/etc/munge.init.in: Changed behavior to capture stderr on start
	  and output it on error.
	* src/etc/munge.init.in: Changed behavior on RedHat to not return an
	  error when stopping a service that is already stopped.

2006-07-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c (main): Moved daemonize_fini() to just before
	  job_accept() in order to return more fatal error conditions to shell.
	* src/munged/munged.c (daemonize_init): Changed behavior for original
	  parent process to read error priority & message via "daemonize" pipe
	  and write error message to stderr before exiting.
	* src/munged/munged.c (open_logfile): Added.
	* src/munged/conf.c, src/munged/conf.h: Added logfile_name to conf.
	* src/libcommon/log.c (_log_aux): Added msgbuf/msgbuflen to prototype.
	  Changed behavior to return error message string via msgbuf.
	* src/libcommon/log.c (_log_die): Added priority & msg to prototype.
	  Changed behavior to return priority and msg across "daemonize" pipe.
	* src/libcommon/log.h (log_set_err_pipe): Updated documentation.

2006-07-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c: Changed daemonize_init() and daemonize_fini()
	  so grandchild process can return error status to original parent
	  process via "daemonize" pipe.
	* src/libcommon/log.c (_log_die): Added check to return error status
	  across "daemonize" pipe.
	* src/libcommon/log.c, src/libcommon/log.h: Added log_set_err_pipe().

	* QUICKSTART: Updated.

	* src/etc/munge.sysconfig: Removed PIDFILE since the MUNGED_PIDFILE
	  define in src/libcommon/munge_defs.h needs to be modified as well.

2006-07-24  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Tweaked %post test to create munge.key.

	* src/libcommon/auth_policy.h: Tweaked documentation.

	* munge.spec: Added munge requires tag to munge-devel & munge-libs.

	* munge.spec: Added %post to create munge.key if it does not exist.

	* src/munged/timer.c (timer_thread): Added pthread_sigmask() to new
	  thread to force signals to interrupt accept() in job_accept().
	* src/munged/work.c (_work_exec):  Added pthread_sigmask() to new
	  threads to force signals to interrupt accept() in job_accept().

2006-07-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c (display_help): Tweaked verbage.

	* src/libcommon/str.c, src/libcommon/str.h: Added strhex2bin().
	  Renamed strhex() to strbin2hex() and changed prototype.
	* src/libmunge/auth_send.c (_name_auth_file): Changed behavior to name
	  auth file by XORing the first half of the random component of the
	  auth pipe with the second half.
	* src/munged/auth_recv.c: Renamed strhex() to strbin2hex().

2006-07-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/auth_send.c (_name_auth_file): Updated function comment.
	* src/munged/auth_recv.c (_name_auth_pipe): Updated function comment.

	* BUGS, README.AIX, src/libcommon/munge_defs.h, src/munged/auth_recv.c,
	  src/munged/conf.c, src/munged/conf.h, src/munged/munged.8.in:
	  Changed MUNGE_AUTH_PIPE_DIR to MUNGE_AUTH_SERVER_DIR.
	  Changed MUNGE_AUTH_FILE_DIR to MUNGE_AUTH_CLIENT_DIR.
	  Changed "--auth-pipe-dir" to "--auth-server-dir".
	  Changed "--auth-file-dir" to "--auth-client-dir".
	* src/libcommon/m_msg.c, src/libcommon/m_msg.h,
	  src/libmunge/auth_send.c, src/munged/auth_recv.c:
	  Changed a_pipe_* to auth_s_*, a_file_* to auth_c_*.

	* src/etc/munge.init.in: Removed "--force" from OPTIONS var.

2006-07-20  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4: Changed behavior to only alter CFLAGS if they
	  are not explicitly set.

	* src/munged/munged.c (main): Prevented PRNG seed from being written on
	  exit if an error was encountered while reading it during startup.
	* src/munged/random.c (random_init): Changed to ignore PRNG seed unless
	  it has proper mode, ownership, and permissions.
	* src/munged/random.h (random_init): Changed prototype to return int.

	* src/munged/auth_recv.c (auth_recv_init): Tweaked err msg verbage.

	* src/etc/Makefile.am, src/libcommon/Makefile.am,
	  src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am: Tweaked dir perms via install-data-local.

	* src/etc/Makefile.am, src/libmunge/Makefile.am: Tweaked dir perms.

	* src/munged/munged.c (main): Moved root privs test (if needed) to
	  after parse_cmdline() so root privs are not needed to get "--help".

	* munge.spec: Specified perms & daemon-ownership for munge-owned dirs.
	* src/etc/Makefile.am: Changed /var/lib/munge and /var/log/munge perms.
	* src/etc/munge.init.in: Changed to run as the "daemon" user.

	* src/munged/conf.c (display_help): Added defaults to help message.

	* src/munged/conf.c: Disabled "--auth-pipe-dir" & "--auth-file-dir"
	  unless MUNGE_AUTH_RECVFD is defined.
	* src/munged/auth_recv.c, src/libmunge/auth_send.c,
	  src/libcommon/auth_policy.h: Renamed MUNGE_AUTH_RECVFD_COMMON
	  to MUNGE_AUTH_RECVFD.

	* src/munged/munged.8.in: Tweaked verbage.

2006-07-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Added MUNGE_AUTH_FILE_DIR.
	  Renamed MUNGE_AUTH_PIPE_RND_BYTES to MUNGE_AUTH_RND_BYTES.
	  Updated documentation.
	* src/libcommon/m_msg.h: Added a_pipe_len, a_pipe_str, a_pipe_is_copy,
	  a_file_len, a_file_str, a_file_is_copy to m_msg struct.
	* src/libcommon/m_msg.c: Added new m_msg struct variables to
	  m_msg_destroy(), _msg_length(), _msg_pack(), _msg_unpack().
	* src/munged/auth_recv.c (_send_auth_req): Changed auth request message
	  format to include a_pipe_str and a_file_str.
	* src/libmunge/auth_send.c (auth_send): Added use of file dir string.
	* src/libmunge/auth_send.c (_recv_auth_req): Added file dir parm.
	  Changed to extract a_pipe_str and a_file_str from request message.
	* src/libmunge/auth_send.c (_name_auth_file): Added file dir parm.
	  Changed auth file path so it is no longer in same dir as auth pipe.
	* src/munged/conf.h: Renamed auth_pipe_rnd_bytes to auth_rnd_bytes.
	  Added auth_file_dir.
	* src/munged/conf.c: Added "--auth-file-dir" command-line option.
	* src/munged/munged.8.in: Added documentation for "--auth-file-dir".
	  Updated documentation for "--auth-pipe-dir".
	* README.AIX: Updated documentation for use of "--auth-file-dir" and
	  "--auth-pipe-dir".

	* src/etc/munge.sysconfig: Updated comments.

	* src/libcommon/auth_policy.h: Tweaked documentation.

	* src/etc/munge.init.in: Removed dependency on perl.

	* src/libcommon/munge_defs.h: Moved MUNGED_LOGFILE to /var/log/munge/.
	* src/etc/Makefile.am: Created /var/log/munge directory.

2006-07-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Added "--oknodo" option to Debian's
	  start-stop-daemon for service_start() and service_stop().

	* src/etc/munge.init.in: Updated PIDFILE to match munge_defs.h.

	* src/munged/dec.c (dec_process_msg): Sanitized rsp msg data on error.
	* src/munged/enc.c (enc_process_msg): Sanitized rsp msg data on error.
	* src/libcommon/m_msg.c, src/libcommon/m_msg.h: Added m_msg_reset().

	* src/libcommon/munge_defs.h: Moved MUNGED_PIDFILE to /var/run/munge/.

2006-07-13  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4: Replaced use of $ac_save_CFLAGS with
	  $ac_env_CFLAGS_set.

	* : Updated URL.  Tweaked caps & spacing.

2006-06-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c (write_pidfile): Fixed double-free of file ptr.

2006-05-25  Chris Dunlap  <cdunlap@llnl.gov>

	* NEWS: Changed format.

2006-05-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.3.

	* config/x_ac_meta.m4: Changed META_ALIAS to not include release if 1.

	* HISTORY, META, NEWS: Updated for 0.5.3 release.

	* munge.spec: Ensured "libmunge-32_64.a" is removed at top of %build.

	* README.MULTILIB: Updated for AIX.

2006-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Moved %build keyword outside of os conditional.

	* munge.spec: Fixed %post, %preun, and %postun scripts to succeed
	  when the executable is not executable (as in the case for AIX).

	* munge.spec: Added support for AIX (32b, 64b, and 32_64 multiarch).

2006-05-15  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Replaced /etc with %{_sysconfdir}, and /var with
	  %{_localstatedir}.  Replaced "/sbin/service" with init script.

	* config/x_ac_arch.m4: Unset x_ac_cv_check_ssl_dir to allow a
	  multiarch reconfigure to succeed when the config cache is enabled.

2006-05-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init.in: Added PIDFILE and localstatedir.
	* src/etc/munge.sysconfig: Added PIDFILE.
	* src/libcommon/munge_defs.h: Added MUNGED_PIDFILE.
	* src/munged/conf.c, src/munged/conf.h, src/munged/munged.c:
	  Added support for pidfile_name.

	* config/x_ac_arch.m4: Added error message if OBJECT_MODE is not
	  exported to the shell for AIX.

2006-05-10  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_arch.m4: Exported OBJECT_MODE for AIX.

	* src/etc/munge.init.in: Changed query_pids ps format specifier
	  from "args" to "command" for OS X.  Replaced query_pids ps format
	  specifier for empty column headers (=) with "| tail +2" for OS X.

	* config/x_ac_arch.m4: Added support for AIX.

2006-05-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am: Created $(localstatedir)/log dir.

	* src/etc/munge.init.in: Renamed from src/etc/munge.init.
	  Added prefix, exec_prefix, sbindir, and sysconfdir.
	  Renamed ENABLE_RELOAD to SIGHUP_RELOAD.
	* configure.ac: Added src/etc/munge.init to AC_CONFIG_FILES.

	* src/etc/munge.init: Replaced use of "which" with query_exec (Tru64).

2006-05-08  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Added X_AC_EXPAND_INSTALL_DIRS.
	* config/x_ac_expand_install_dirs.m4: Added.
	* src/libcommon/munge_defs.h: Updated MUNGE_SOCKET_NAME,
	  MUNGE_AUTH_PIPE_DIR, MUNGED_LOGFILE, MUNGED_RANDOM_SEED, and
	  MUNGED_SECRET_KEY to use the expanded install dir names in config.h.

2006-05-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init, src/etc/munge.sysconfig: Tweaked defs.

2006-05-04  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Added support for NICE & USER.
	  Changed ENABLE_SIGHUP_RELOAD to ENABLE_RELOAD.
	  Replaced use of "source" keyword with "." (AIX).
	* src/etc/munge.sysconfig: Added NICE & USER.  Updated comments.

	* src/etc/Makefile.am: Preserved existing config files on install.

	* munge.spec: Explicitly set localstatedir & sysconfdir for configure.
	* src/etc/Makefile.am: Added use of $(localstatedir) & $(sysconfdir).

	* munge.spec: Added "/var/*/*" to %files.
	* src/etc/Makefile.am: Removed use of $(sysconfdir).  Created dirs for
	  /etc/munge, /var/lib/munge, and /var/run/munge.
	* src/libcommon/munge_defs.h: Changed MUNGE_SOCKET_NAME.

2006-05-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/Makefile.am: Removed tests for init.d & sysconfig files.

	* munge.spec: Removed used of munge-files-aux list.
	* src/etc/Makefile.am: Removed tests for init.d & sysconfig dirs.

2006-05-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Removed use of "local" keyword (Solaris).

	* src/etc/munge.init: Added tests for distro release/version files in
	  service_init() to prevent SuSE from being recognized as Debian due to
	  existence of /sbin/start-stop-daemon.

	* PLATFORMS: Updated.

	* src/etc/munge.init: Replaced "echo -n" with "printf" (AIX).

	* src/etc/munge.init, src/etc/munge.sysconfig: Revamped.

2006-04-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Added Should-Start & Should-Stop LSB headers.
	  Changed return code for invalid or excess args to match LSB spec.
	  Changed return code for unimplemented feature to match LSB spec.
	  Tweaked comments & syntax.  Tweaked SuSE try-restart behavior.

	* munge.spec: Tweaked %post.

2006-03-07  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.2.

	* HISTORY, META, NEWS: Updated for 0.5.2 release.

	* munge.spec: Fixed so the files in the munge-devel & munge-libs RPMs
	  are permissioned properly.

2006-02-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.1.

	* HISTORY, META, NEWS: Updated for 0.5.1 release.

	* src/libcommon/license.c: Changed Munge to MUNGE.

	* src/munged/munged.c (main): Changed new logfile perms to 640.

2006-01-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.5.

	* HISTORY, META, NEWS, PLATFORMS: Updated for 0.5 release.

	* README: Updated.

	* munge.spec: Updated %files to include new documentation.

	* README.MULTILIB: Added.

	* QUICKSTART: Added.

2006-01-23  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Moved libmunge.so from libs back to devel subpackage.

	* src/munged/auth_recv.c: Updated for new munge message layer.
	* src/libmunge/auth_send.c: Updated for new munge message layer.

2006-01-19  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Moved libmunge.so from devel to libs subpackage.

	* src/libcommon/munge_defs.h:
	  Appended interface version number to MUNGE_SOCKET_NAME.

	* src/libcommon/license.c: Updated copyright date range.

	* src/libcommon/m_msg.c (_msg_unpack):
	  Added cast to discard const qualifier from ptr type.
	* src/munged/zip.c (zip_decompress_length):
	  Added cast to discard const qualifier from ptr type.

	* HISTORY, META, NEWS: Updated for 0.5 release.

2006-01-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c (_gids_hash_create):
	  Ensured endgrent() is called on error.

2006-01-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/m_msg.c (_alloc):
	  Added NUL-termination byte to end of memory allocation.
	* src/libmunge/encode.c (_encode_rsp):
	  Removed unnecessary dup of rsp data.
	* src/libmunge/decode.c (_decode_rsp):
	  Removed unnecessary dup of rsp data & realm_str.

	* src/munged/enc.c (enc_fini):
	  Free()d req data before overwriting data ptr with rsp data.

2006-01-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/m_msg.c (m_msg_send):
	  Added check for pkt_is_copy before free()ing pkt.
	* src/libcommon/m_msg.c (m_msg_send):
	  Added check for negative length returned from _msg_length().
	* src/libcommon/m_msg.c: Tweaked function documentation.

	* src/munged/dec.c (dec_unarmor):
	  Free()d data after unarmoring to prevent leak in dec_unpack_inner().
	* src/munged/dec.c (dec_unpack_outer):
	  Set realm_is_copy flag to prevent double free of realm_str.

	* src/munged/job.c (job_accept):
	  Added call to destroy msg if m_msg_bind() fails.

	* src/munged/dec.c (dec_decompress): Removed dead code in 'err' label.

	* src/munged/crypto_thread.c: Added checks to abort on error.

	* src/libmunge/decode.c (_decode_rsp):
	  Fixed bug where routine not aborted after EMUNGE_NO_MEMORY set.

	* src/libmunge/ctx.c (_munge_ctx_set_err):
	  Fixed potential NULL dereference of ctx in return value.

	* src/munge/remunge.c (parse_cmdline):
	  Fixed NUL termination of payload data.

	* src/libcommon/log.c (log_open_syslog):
	  Fixed 'identity' dereference before NULL check.

	* src/libcommon/log.c: Added void cast to ignore return code on error.

2006-01-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/decode.c (_decode_req):
	  Set data_is_copy flag to prevent free() of caller-supplied cred.

	* src/libcommon/m_msg.c: Revamped to support msg packing & unpacking.
	* src/libcommon/m_msg.h: Incremented MUNGE_MSG_VERSION to 4.
	  Removed struct m_msg_head & struct m_msg_v1.  Expanded struct m_msg.
	  Added m_msg_type_t, m_msg_magic_t, & m_msg_version_t.
	* src/libcommon/m_msg.h (m_msg_create): Changed prototype.
	* src/libcommon/m_msg.h (m_msg_bind): Added.
	* src/libcommon/m_msg.h (m_msg_send): Changed prototype.
	* src/libcommon/m_msg.h (m_msg_recv): Changed prototype.
	* src/libcommon/munge_defs.h: Moved MUNGE_MSG_MAGIC to m_msg.h.
	* src/munged/enc_v1.c: Renamed to src/munged/enc.c.
	* src/munged/enc_v1.h: Renamed to src/munged/enc.h.
	* src/munged/dec_v1.c: Renamed to src/munged/dec.c.
	* src/munged/dec_v1.h: Renamed to src/munged/dec.h.
	* src/munged/enc.c, src/munged/enc.h, src/munged/dec.c,
	  src/munged/dec.h, src/munged/job.c, src/munged/replay.c:
	  Updated for new munge message layer.
	* src/munged/job.h: Removed job_error().
	* src/munged/cred.c: Tweaked syntax.
	* src/libmunge/ctx.c, src/libmunge/ctx.h:
	  Renamed fields of struct munge_ctx: realm/realm_str,
	  socket/socket_str, errnum/error_num, errstr/error_str.
	* src/libmunge/m_msg_client.c: Updated for new munge message layer.
	* src/libmunge/m_msg_client.h (m_msg_client_xfer): Changed prototype.
	* src/libmunge/decode.c, src/libmunge/encode.c:
	  Updated for new munge message layer and struct munge_ctx.

2005-12-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/m_msg.h, src/munged/enc_v1.c, src/munged/dec_v1.c,
	  doc/credential_v3_format.txt: Swapped ordering of mac & zip fields.

2005-11-22  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, config/x_ac_arch.m4: Added X_AC_ARCH (--enable-arch=n)
	  to specify whether to generate 32-bit or 64-bit code.
	* munge.spec: Added support to rpm build --with "arch32" or "arch64".

2005-11-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Changed default cipher to aes128.
	* NEWS: Updated.

	* src/libmunge/ctx.c (munge_ctx_set): Added test for MUNGE_OPT_REALM
	  to ensure realm strlen < 256.

	* src/munged/enc_v1.c: Removed enc_v1_precompress().
	  Moved enc_v1_mac() between enc_v1_compress() & enc_v1_encrypt().
	* src/munged/dec_v1.c:
	  Moved dec_v1_mac() between dec_v1_decrypt() & dec_v1_decompress().
	* src/munged/cred.c, src/munged/cred.h: Removed from struct munge_cred
	  the zippy_mem_len, zippy_mem, zippy_len, & zippy fields used by
	  enc_v1_precompress().
	* src/munged/cred.h: Incremented MUNGE_CRED_VERSION to 3.
	* doc/credential_v1_format.txt, doc/credential_v2_format.txt: Updated.
	* doc/credential_v3_format.txt: Added to fix bug with credential's
	  compression header not being protected by the mac.
	* NEWS: Updated.

2005-11-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c (dec_v1_decompress): Added test to abort
	  decompression if a block cipher padding error has already occurred.
	* src/munged/dec_v1.c: Moved c->salt_len initialization from
	  dec_v1_unpack_outer() to dec_v1_unpack_inner().

	* src/munged/zip.c (zip_compress_block, zip_decompress_block):
	  Added check to ensure (srclen > 0).

2005-11-16  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4: Fixed behavior when enable-debug && !CFLAGS.

	* src/munged/zip.c: Added magic sentinel to beginning of zip_meta_t
	  to check if embedded length of original uncompressed data is valid.
	* src/munged/zip.h (zip_compress_block, zip_decompress_block):
	  Changed name of dstlen parm to pdstlen.

	* config/x_ac_debug.m4: Changed behavior to allow existing CFLAGS to
	  be preserved when debugging is enabled.

2005-10-31  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.3.

2005-10-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Fixed bug with RHEL4-U1's chkconfig where it
	  doesn't handle the existence of a 'Required-Start' without a
	  'Required-Stop' (Thanks to Christopher Holmes).

2005-07-20  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.2.

	* config/x_ac_meta.m4: Removed trailing ';' from m4_pattern_allow.

	* config/x_ac_meta.m4: Added m4_pattern_allow to suppress the
	  "possibly undefined macro" warnings under the new libtool.

2005-07-19  Chris Dunlap  <cdunlap@llnl.gov>

	* : Updated FSF address in copyleft.

	* config/argz.m4, config/libtool.m4, config/ltoptions.m4,
	  config/ltsugar.m4, config/ltversion.m4:
	  Added as a result of upgrading to the cvs HEAD release of libtool.
	* aclocal.m4, config/config.h.in, config/ltmain.sh, configure:
	  Updated as a result of upgrading to the cvs HEAD release of libtool.
	* configure.ac: Replaced AC_PROG_LIBTOOL with LT_INIT for new libtool.
	* : Re-bootstrap'd with the cvs HEAD release of libtool version 2.1a,
	  GNU libtool 1.1984 2005/07/11 12:11:25, in order to fix a bug under
	  AIX where the convenience libs were not being added to libmunge;
	  this appears to be the result of libtool's $whole_archive_flag_spec
	  being set to ' ' instead of ''.  This also fixes a bug in the
	  libtool --mode=link cmd for libmunge that failed to properly expand
	  $allow_undefined_flag, thereby causing $archive_expsym_cmds to
	  contain "${wl}-berok" after being eval'd.

	* bootstrap: Removed PATH (in order to use a non-standard libtool).

	* Makefile.am: Replaced PACKAGE with META_NAME.

2005-07-13  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Marked /etc/munge dir with %config attr.

	* munge.spec: Added /etc/munge & /var/lib/munge dirs to %files.

	* README: Updated info regarding defaults in munge_defs.h.

	* src/libcommon/munge_defs.h: Updated values for MUNGE_SOCKET_NAME,
	  MUNGE_AUTH_PIPE_DIR, MUNGED_LOGFILE, MUNGED_RANDOM_SEED, and
	  MUNGED_SECRET_KEY to comply with the Filesystem Hierarchy Standard.

	* src/munged/conf.c (display_help): Documented deprecated cmdline opts.

	* src/libcommon/munge_defs.h:
	  Tweaked _X_AC_META_GETVAL to allow both key:val and key=val in META.

2005-07-12  Chris Dunlap  <cdunlap@llnl.gov>

	* META: Updated Author tag.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/libmunge/munge_enum.3.in,
	  src/munge/munge.1.in, src/munge/remunge.1.in,
	  src/munge/unmunge.1.in, src/munged/munged.8.in: Added META_AUTHOR.

	* config/x_ac_meta.m4: Added _X_AC_META_GETVAL to parse META file.

2005-07-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Fixed 'start' behavior under RedHat so daemon is
	  not started if it is already running (Thanks to Christopher Holmes).

	* Makefile.am, config/Make-rpm.mk: Removed deprecated Make-rpm.

2005-07-06  Chris Dunlap  <cdunlap@llnl.gov>

	* META: Tweaked formatting.  Replaced Package with Name.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/libmunge/munge_enum.3.in,
	  src/munge/munge.1.in, src/munge/remunge.1.in,
	  src/munge/unmunge.1.in, src/munged/munged.8.in:
	  Updated copyright.  Added META_DATE and META_ALIAS.
	* src/munge/munge.c, src/munge/remunge.c, src/munge/unmunge.c,
	  src/munged/conf.c, src/munged/munged.c: Invoked display_version().
	* src/libcommon/version.c, src/libcommon/version.h,
	  src/libcommon/Makefile.am: Added.  Created display_version().
	* src/libcommon/license.c, src/libcommon/license.h: Updated copyright.
	* src/libmunge/Makefile.am: Prefixed meta LT vars with "META_".
	* config/x_ac_meta.m4: Revamped.  Prefixed meta vars with "META_".
	  Replaced PACKAGE with META_NAME.  Added META_ALIAS.

2005-06-29  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Created dynamic test for init.d & sysconfig %files.
	* munge.spec: Set void version number -- build script will rewrite it.

2005-06-01  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_check_ssl.m4: Fixed bug causing wrong ssl dir to be set.
	* : Re-bootstrap'd with updated autotools jazz.

2005-04-05  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with updated autotools-dev.

2005-04-05  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.9.5 on Debian Sarge.

2005-02-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmissing/strlcpy.c, src/libmissing/strlcat.c:
	  Latest from <ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/>.

2005-01-26  Chris Dunlap  <cdunlap@llnl.gov>

	* munge.spec: Added 'devel' and 'libs' subpackages.

	* munge.spec: Added version number so "rpmbuild -ta" will work.

	* munge.spec:
	  Removed %post rm of chkconfig droppings from the "-1 priority" bug.

2005-01-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/hash.c (hash_destroy): Fixed memory leak.

2004-12-21  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.1.

	* HISTORY, META, NEWS, TODO: Updated for 0.4.1 release.

	* munge.spec:
	  Added %post to remove chkconfig droppings from the "-1 priority" bug.

	* src/etc/munge.init:
	  Fixed bug preventing priorities from being recognized by chkconfig.

2004-12-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth_recv.c: Added <sys/types.h> include for getpeereid().

	* NEWS: Updated v0.4 news wrt SuSE/LSB init script support.

	* JARGON: Updated URL.

2004-12-07  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.4.

	* HISTORY, META, NEWS, PLATFORMS: Updated for 0.4 release.

	* src/libmunge/munge.3.in, src/libmunge/munge.h,
	  src/libmunge/strerror.c: Cleaned up error codes.

	* README, src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/munged/munged.8.in: Tweaked verbage.

2004-12-02  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated notes regarding creation of secret key.

	* src/etc/munge.init: Revamped for SuSE and maybe LSB.

	* configure.ac, config/x_ac_check_ssl.m4:
	  Moved X_AC_CHECK_SSL before AC_PROG_LIBTOOL to allow the
	  linker's libpath to be computed correctly under AIX.

2004-12-01  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated info regarding /etc/sysconfig/munge.
	* munge.spec, src/etc/Makefile.am, src/etc/munge.sysconfig:
	  Added /etc/sysconfig/munge.

	* src/libmunge/enum.c (_munge_enum_lookup): Changed return type from
	  const munge_enum_table_t to munge_enum_table_t.

2004-11-30  Chris Dunlap  <cdunlap@llnl.gov>

	* config/Make-rpm.mk: Updated to reflect prior changes to META.

	* src/munged/munged.8.in: Updated info for '--force' cmdline opt.

2004-11-29  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c: Added <sys/socket.h> for AF_INET.

	* config/x_ac_check_cond_lib.m4, config/x_ac_check_fifo_recvfd.m4,
	  config/x_ac_check_peercred.m4, config/x_ac_check_pthreads.m4,
	  config/x_ac_debug.m4: Tweaked docs to be consistent with others.

	* configure.ac, config/x_ac_check_ssl.m4: Added X_AC_CHECK_SSL.

2004-11-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/unmunge.1.in: Updated verbage.

	* src/munge/unmunge.c:
	  Changed MUNGE_KEY_ORIGIN to MUNGE_KEY_ENCODE_HOST.
	  Tweaked munge_keys[] strings.

	* configure.ac, config/x_ac_aix.m4:
	  Added X_AC_AIX to enable run-time linking under AIX.

2004-11-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/Makefile.am, src/libcommon/m_msg.c,
	  src/libcommon/m_msg.h, src/libcommon/msg.c, src/libcommon/msg.h,
	  src/libmunge/Makefile.am, src/libmunge/m_msg_client.c,
	  src/libmunge/m_msg_client.h, src/libmunge/msg_client.c,
	  src/libmunge/msg_client.h:
	  Renamed src/libcommon/msg.[ch] to m_msg.[ch].
	  Renamed src/libmunge/msg_client.[ch] to m_msg_client.[ch].
	  Changed "msg_" prefix to "m_msg_".  All callers changed.
	  Fixed "previous declaration of 'msg_t'" error under AIX.

	* src/libmunge/Makefile.am:
	  Added -export-symbols-regex to libmunge.

	* src/libcommon/Makefile.am, src/libcommon/msg.c, src/libcommon/msg.h,
	  src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Renamed src/libcommon/munge_msg.[ch] to msg.[ch].
	  Removed "munge_" prefix on all "munge_msg_*" functions.
	  All callers changed.
	* src/libmunge/ctx.c, src/libmunge/ctx.h:
	  Removed unnecessary include for munge_msg.h.

2004-11-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/enum.c:
	  Fixed compiler warning regarding assignment of read-only variable.

	* META, config/x_ac_meta.m4, src/libmunge/Makefile.am:
	  Added LT_Current, LT_Revision, and LT_Age for libtool -version-info.

	* README, munge.spec: Updated verbage.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Updated verbage.
	* src/libmunge/munge.h: Sync'd with manpages.

2004-11-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h:
	  Removed MUNGE_OPT_LAST_ENTRY, MUNGE_CIPHER_LAST_ENTRY,
	  MUNGE_MAC_LAST_ENTRY, MUNGE_ZIP_LAST_ENTRY, EMUNGE_LAST_ENTRY.
	* src/munged/zip.c: Removed use of MUNGE_ZIP_LAST_ENTRY.

	* src/libcommon/munge_msg.h: Removed MUNGE_MSG_LAST_ENTRY.

	* configure.ac, src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/libmunge/munge_enum.3.in,
	  src/munge/munge.1.in, src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Added munge_enum manpage.
	* src/libmunge/Makefile.am, src/libmunge/enum.c, src/libmunge/munge.h,
	  src/libmunge/strings.c: Added munge_enum_is_valid(),
	  munge_enum_int_to_str(), and munge_enum_str_to_int().
	  Removed munge_cipher_strings, munge_mac_strings, munge_zip_strings.
	  Replaced libmunge/strings.c with libmunge/enum.c.
	* src/munge/munge.c, src/munge/remunge.c, src/munge/unmunge.c:
	  Replaced use of munge_cipher_strings, munge_mac_strings, and
	  munge_zip_strings.

	* src/libcommon/str.c, src/munged/auth_recv.c, src/munged/hash.c,
	  src/munged/munged.c, src/munge/read.c: Tweaked formatting.

2004-11-11  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac: Tweaked inet_ntop replacement test for Solaris.

	* src/libmissing/inet_ntop.h: Added sys/socket.h include for socklen_t.

	* src/libmissing/inet_ntop.h: Changed #ifndef x to #if !x.
	* src/libmissing/strlcat.h, src/libmissing/strlcpy.h:
	  Changed #if #else x to #if !x.

	* src/libmunge/auth_send.c, src/libmunge/msg_client.c,
	  src/munged/munged.c: Replaced strlcat/strlcpy includes w/ missing.h.

	* configure.ac: Changed X_AC_CHECK_COND_LIB libnsl test
	  from inet_ntoa() to gethostbyname().

	* configure.ac, src/libmissing/inet_ntop.c, src/libmissing/inet_ntop.h,
	  src/libmissing/missing.h, src/munge/unmunge.c, src/munged/conf.c:
	  Added support for platforms lacking inet_ntop().
	  Replaced inet_ntoa() with inet_ntop().

2004-11-10  Chris Dunlap  <cdunlap@llnl.gov>

	* README: Updated.
	* README.AIX: Added.
	* configure.ac: Changed to older AC_INIT & AM_INIT_AUTOMAKE constructs.
	* munge.spec: Updated description.  Added manpages.
	* config/x_ac_meta.m4: Added metatags for AUTHOR and DATE.
	* src/libcommon/Makefile.am, src/libmunge/Makefile.am,
	  src/munge/Makefile.am, src/munged/Makefile.am: Added manpages.
	* src/libcommon/munge.7.in, src/libmunge/munge.3.in,
	  src/libmunge/munge_ctx.3.in, src/munge/munge.1.in,
	  src/munge/remunge.1.in, src/munge/unmunge.1.in,
	  src/munged/munged.8.in: Added.

	* src/libcommon/munge_defs.h, src/munged/conf.c:
	  Added MUNGE_AUTH_ROOT_ALLOW_FLAG.

	* src/munged/conf.c: Changed "--keyfile" cmdline opt to "--key-file".

	* src/munged/conf.c: Added "--auth-pipe-dir" cmdline opt.

2004-11-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/auth_recv.c,
	  src/munged/conf.c, src/munged/conf.h:
	  Changed MUNGE_AUTH_PIPE_NAME_PREFIX to MUNGE_AUTH_PIPE_DIR.
	  Changed MUNGE_AUTH_PIPE_NAME_RND_BYTES to MUNGE_AUTH_PIPE_RND_BYTES.
	  Changed conf struct auth_pipe_prefix to auth_pipe_dir.

	* src/munged/conf.c:
	  Changed "--nthreads" cmdline opt to "--num-threads".
	  Tweaked display_help() information.

	* src/munge/munge.c, src/munge/remunge.c, src/munge/unmunge.c:
	  Tweaked display_help() information.

	* src/libcommon/auth_policy.h, src/libcommon/munge_defs.h,
	  src/munged/conf.c: Moved defines from auth_policy.h to munge_defs.h.
	  Renamed AUTH_PIPE_NAME_PREFIX to MUNGE_AUTH_PIPE_NAME_PREFIX.
	  Renamed AUTH_PIPE_NAME_RND_BYTES to MUNGE_AUTH_PIPE_NAME_RND_BYTES.

	* src/libcommon/auth_policy.h:
	  Removed AUTH_PIPE_NAME_MAX_LEN.
	  Changed AUTH_PIPE_NAME_RND_BYTES from 8 to 16.
	* src/libmunge/auth_send.c, src/munged/auth_recv.c:
	  Changed static bufs using AUTH_PIPE_NAME_MAX_LEN to dynamic memory.
	* src/munged/conf.c, src/munged/conf.h:
	  Added auth_pipe_prefix & auth_pipe_rnd_bytes to conf struct.

	* src/libmunge/munge.h:
	  Changed indenting of preprocessor cmds so line begins with '#'.

2004-11-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/work.c (work_queue):
	  Fixed bug where rc was used uninitialized.
	  Do not signal condition if _work_enqueue() fails.

	* src/libcommon/munge_msg.c:
	  Documented maxlen parm in munge_msg_send() and munge_msg_recv().

	* src/libmunge/auth_send.c:
	  Added missing maxlen parm to invocation of munge_msg_recv().
	* src/munged/auth_recv.c:
	  Added missing maxlen parm to invocation of munge_msg_send().

	* : Re-bootstrap'd with automake-1.9.3.

2004-10-29  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with libtool-1.5.6 Debian: 220.

	* munge.spec: Added %config(noreplace) to init script.

2004-10-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Added support for /etc/sysconfig/munge.

	* : Re-bootstrap'd with automake-1.9.2.

	* munge.spec, src/etc/Makefile.am, src/etc/munge.init:
	  Removed dependence on /etc/rc.d/init.d directory.

2004-10-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/job.c: Added include for building on SuSE SLES-8.

	* README: Updated.

	* src/libcommon/munge_defs.h: Added MUNGE_MAXIMUM_REQ_LEN.
	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Added maxlen parm to munge_msg_send() and munge_msg_recv().
	  All callers changed.
	* src/libmunge/msg_client.c (munge_msg_client_xfer):
	  Abort retry attempts on EMUNGE_BAD_LENGTH.
	* src/libmunge/munge.h, src/libmunge/strerror.c:
	  Added EMUNGE_BAD_LENGTH.  Renumbered munge_err enum.
	* src/munged/job.c (_job_exec): Limit msg len to MUNGE_MAXIMUM_REQ_LEN.

	* src/libcommon/munge_msg.h: Incremented MUNGE_MSG_VERSION to 3
	  since retry field was added to munge_msg_head struct.

2004-09-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h: Tweaked comments.

	* src/munged/job.c (job_accept):
	  Changed log msg for processing backlog.

	* src/munged/dec_v1.c (dec_v1_validate_replay):
	  Added log msg when allowing credential replay due to retry.

	* src/libcommon/munge_defs.h:
	  Added MUNGE_SOCKET_XFER_USLEEP.  Removed MUNGE_SOCKET_ACCEPT_USLEEP.
	  Changed MUNGE_SOCKET_XFER_ATTEMPTS from 3 to 5.
	* src/libmunge/msg_client.c (munge_msg_client_xfer):
	  Added linear back-off to retry of failed credential transactions.
	* src/munged/job.c (job_accept):
	  Changed usleep() to work_wait() when accept() exceeds open fd limit.

2004-09-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Removed leading underscore from public functions.
	  All callers changed.

	* src/libcommon/munge_defs.h:
	  Added MUNGE_REPLAY_RETRY_FLAG.  Added MUNGE_SOCKET_XFER_ATTEMPTS.
	  Named MUNGE_SOCKET_CONNECT_RETRIES as MUNGE_SOCKET_CONNECT_ATTEMPTS.
	* src/libcommon/munge_msg.c, src/libcommon/munge_msg.h:
	  Added retry field to munge_msg_head struct.
	  Removed _munge_msg_reset() -- merged into _munge_msg_create().
	* src/libmunge/decode.c, src/libmunge/encode.c,
	  src/libmunge/msg_client.c, src/libmunge/msg_client.h:
	  Added munge_msg_client_xfer() to retry failed msg transactions.
	  Changed _munge_msg_client_connect() and
	  _munge_msg_client_disconnect() to static functions.
	* src/munged/conf.c, src/munged/conf.h:
	  Added got_replay_retry flag to conf struct.
	* src/munged/dec_v1.c: Added dec_v1_check_retry().
	  Added test for got_replay_retry flag to dec_v1_validate_replay().
	* src/munged/enc_v1.c: Added enc_v1_check_retry().

2004-09-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.c (_gids_hash_add):
	  Removed warning for having detected duplicate uid for given gid.

2004-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/conf.h, src/munged/munged.c:
	  Moved global conf definition from munged.c to conf.c.

2004-09-17  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/random.c: Allow lack of entropy to be forced (-f).

	* src/munged/random.c: Replaced parm asserts with if-guards.

	* src/munged/gids.c:
	  Added #ifndef's around GIDS_DEBUG and GIDS_GROUP_FILE.

	* src/munged/work.c:
	  Moved pthread_cond_signal() outside of critical region.
	  Replaced public function parm asserts with if-guards.

	* src/munged/timer.c:
	  Moved pthread_cond_signal() outside of critical region.

	* src/munged/gids.c (gids_destroy):
	  Moved hash_destroy() outside of critical region.

2004-09-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c: Revamped "-u" and "-g" cmdline opts.
	* src/munge/remunge.c: Added "-u" and "-g" cmdline opts.

	* src/munged/timer.h: Tweaked timer_init() docs.

	* src/munged/hash.c: Replaced parm asserts with if-guards.

	* src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Removed extern declaration of conf -- now in conf.h.

	* src/munged/gids.c, src/munged/gids.h:
	  Added timer to periodically re-parse group info.
	* src/munged/conf.c, src/munged/conf.h:
	  Added extern declaration of conf.
	  Added got_group_stat flag to struct conf.
	* src/libcommon/munge_defs.h:
	  Added MUNGE_GROUP_STAT_FLAG and MUNGE_GROUP_PARSE_TIMER.

2004-09-10  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/replay.c: Removed mac_len from union replay_key
	  to further reduce storage requirements for replay data.
	* src/munged/replay.c: Changed struct replay_key to union replay_key
	  to reduce storage requirements for replay data.

	* src/munged/cred.c (cred_create):
	  Fixed bug where error condition was not set on failure.

2004-09-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/remunge.c:
	  Fixed strtol() int/long mismatches for 64-bit platforms.

2004-09-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/gids.h: Changed GIDS_HASH_SIZE from 1213 to 2053.

2004-09-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/remunge.c: Set stdout to be line buffered.
	* src/munge/remunge.c: Close stdin.
	* src/munge/remunge.c: Ignore SIGHUP.
	* src/munge/remunge.c: Changed DEF_DO_DECODE from 1 to 0.
	* src/munge/remunge.c: Subtract error count from number processed.

	* src/munged/hash.c: Changed HASH_ALLOC from 256 to 1024.
	* src/munged/replay.c: Changed REPLAY_ALLOC from 256 to 1024.
	* src/munged/replay.h: Changed REPLAY_HASH_SIZE from 4013 to 65537.

	* src/munged/gids.c, src/munged/gids.h: Added GIDS_HASH_SIZE.

	* src/munged/munged.c (main):
	  Changed default log priority level from LOG_NOTICE to LOG_INFO.

	* src/munged/conf.c (display_help): Added newline.

	* src/munge/munge.c (display_strings,str_to_int): Tweaked formatting.

	* src/munge/Makefile.am, src/munge/remunge.c: Added.

2004-08-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/job.c (job_accept):
	  Fix bug causing the daemon to crash if accept() exceeded the
	  open file descriptor limit for the process.

	* src/libmunge/ctx.c, src/libmunge/munge.h:
	  Added munge_ctx_copy().  Added docs wrt context function usage.

2004-08-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_DEFAULT_ZIP from MUNGE_ZIP_ZLIB to MUNGE_ZIP_NONE.

2004-08-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c (destroy_conf): Removed unnecessary test for ctx.
	* src/munge/unmunge.c (destroy_conf): Removed unnecessary test for ctx.

2004-08-20  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c (parse_cmdline):
	  Check for overflow of time-to-live "-t" cmdline option.

	* src/munge/munge.c (parse_cmdline):
	  Changed strtol() err msg from log_errno() to log_err().

2004-08-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c:
	  Reformatted code.  Changed help option string width.

	* src/munge/munge.c: Tweaked use of strtol().
	* src/munge/munge.c (str_to_int): Revamped.

2004-08-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_REPLAY_PURGE_TIMER from 300 to 60.

2004-08-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.9.1.

	* src/munged/conf.c:
	  Added temporary cmdline opts for 'keyfile' and 'nthreads'.

	* src/munged/job.c (job_accept): Tweaked log messages.

	* src/libcommon/munge_defs.h: Changed MUNGE_THREADS from 4 to 2.

2004-08-11  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.9.

	* src/munged/work.c (work_fini):
	  Fixed bug preventing the worker thread(s) from being canceled.

2004-08-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/timer.c (timer_fini):
	  Changed assert of pthread_join() rc to an explicit test.
	  Reset timer_tid after timer thread has been joined.

	* src/libcommon/munge_defs.h, src/munged/conf.c, src/munged/conf.h,
	  src/munged/job.c, src/munged/job.h, src/munged/work.c,
	  src/munged/work.h:
	  Added support for thread work crew to process credential requests.
	* src/munged/munged.c, src/munged/sock.c, src/munged/sock.h:
	  Moved munge_sock_create() & munge_sock_destroy() to munged.c.
	  Moved munge_sock_accept() to job.c:job_accept().
	* src/munged/msg_server.c, src/munged/msg_server.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Moved munge_msg_server_thread() to job.c:_job_exec().
	  Moved err_v1_response() to job.c:job_error().

2004-07-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth_recv.c: Fixed bug in MUNGE_AUTH_RECVFD_MKNOD codepath
	  causing an auth pipe fd leak resulting in poor performance on AIX.

2004-07-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/sock.c, src/munged/timer.c:
	  Set pthread stacksize to 256KB (to appease ia64).

2004-06-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/munged.c:
	  Moved auth_recv_init(), replay_init(), replay_fini(),
	  gids_create(), and gids_destroy() from create_conf() to main().

2004-06-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/sock.c, src/munged/timer.c: Set pthread stacksize to 64KB.

2004-06-09  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h: Added support for C++.

2004-05-26  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c, src/munged/replay.c, src/munged/replay.h:
	  Fixed bug where decoded cred was marked as "played" even if the
	  rsp msg was not successfully delivered to the client {gnats:437}.

2004-05-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with automake-1.8.5.

2004-05-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/auth_policy.h, src/libmunge/auth_send.c,
	  src/libmunge/auth_send.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/auth_recv.c,
	  src/munged/auth_recv.h: Added AUTH_PIPE_NAME_PREFIX.
	  Changed return types of auth_send() and auth_recv().
	  Changed reporting of auth_send() and auth_recv() errors.

2004-05-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c, src/munged/munged.c: Moved auth_recv_init()
	  before gids_create() to allow for quicker exit when !root on AIX.

	* src/munged/gids.c (gids_create): Allow errno == ENOENT to denote
	  success after last entry is returned by getgrent() for glibc-2.2.5.

2004-05-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/libcommon/munge_msg.c,
	  src/libcommon/munge_msg.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/cred.h, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/msg_server.c:
	  Incremented MUNGE_MSG_VERSION.  Fixed segfault occurring when
	  received message was smaller than its expected length {gnats:432}.

2004-04-30  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.3.

	* README, munge.spec: Updated description.

	* src/munge/munge.c, src/munged/gids.c: Tweaked includes for FreeBSD.
	* src/munge/munge.c, src/munged/zip.c: Minor tweaks for Solaris.

	* src/etc/Makefile.am: Replaced "/etc" with $(sysconfdir).

	* configure.ac: Added checks for standards.h, socklen_t, /dev/spx,
	  X_AC_CANONICAL, and X_AC_CHECK_FIFO_RECVFD.
	* config/x_ac_canonical.m4:
	  Added check to set the canonical host system type.
	* config/x_ac_check_fifo_recvfd.m4:
	  Added check to test whether an fd can be passed over a fifo.
	* config/x_ac_check_cond_lib.m4, config/x_ac_check_peercred.m4,
	  config/x_ac_check_pthreads.m4, config/x_ac_debug.m4,
	  config/x_ac_gpl_licensed.m4, x_ac_humor.m4, x_ac_meta.m4:
	  Reformatted.

	* src/libcommon/Makefile.am, src/libcommon/auth_policy.h,
	  src/libcommon/common.h, src/libcommon/munge_msg.h,
	  src/libmunge/Makefile.am, src/libmunge/auth_send.c,
	  src/libmunge/auth_send.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/munged/Makefile.am, src/munged/auth.c,
	  src/munged/auth.h, src/munged/auth_recv.c, src/munged/auth_recv.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/munged.c:
	  Added support for authenticating clients under AIX & Solaris.
	  Replaced auth.[ch] with auth_policy.h & auth_(send|recv).[ch].

2004-04-21  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged/gids.c (gids_create): Added log msg.

2004-04-16  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v2_format.txt, src/libcommon/munge_defs.h,
	  src/libcommon/munge_msg.h, src/libmunge/ctx.c, src/libmunge/ctx.h,
	  src/libmunge/decode.c, src/libmunge/encode.c, src/libmunge/munge.h,
	  src/libmunge/strerror.c, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/Makefile.am, src/munged/conf.c, src/munged/conf.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/gids.c,
	  src/munged/gids.h, src/munged/hash.c, src/munged/hash.h,
	  src/munged/replay.c: Added support for UID & GID decode restrictions.

2004-04-14  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.3, libtool-1.5.6.

2004-04-08  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c: Tweaks for Solaris 2.8.

	* src/libmunge/Makefile.am, src/munge/Makefile.am,
	  src/munged/Makefile.am:
	  Moved linking of libnsl from libmunge to munged/unmunge.

	* configure.ac, config/x_ac_check_cond_lib.m4,
	  src/libmunge/Makefile.am: Added checks for libnsl & libsocket.

	* configure.ac, src/libmissing/Makefile.am, src/libmissing/getopt.c,
	  src/libmissing/getopt.h, src/libmissing/getopt1.c, src/munge/munge.c,
	  src/munge/unmunge.c, src/munged/conf.c:
	  Added GNU getopt from glibc-2.3.2 to libmissing.

2004-04-06  Chris Dunlap  <cdunlap@llnl.gov>

	* src/etc/munge.init: Tweaked in an attempt to make path independent.

2004-04-02  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added official UCRL number.

	* munge.spec, src/etc/munge.init:
	  Changed daemon rpm (re)start behavior at install or upgrade.

2004-03-31  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_debug.m4, src/munge/unmunge.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/zip.c:
	  Added -pedantic to --enable-debug CFLAGS.

2004-03-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/munged.c (main):
	  Changed logfile priority from LOG_DEBUG to LOG_NOTICE (if NDEBUG).

	* munge.spec, config/Make-rpm.mk:
	  Changed tarball suffix from ".tgz" to ".tar.gz".

2004-03-24  Chris Dunlap  <cdunlap@llnl.gov>

	* configure.ac, config/x_ac_check_pthreads.m4,
	  config/x_ac_reentrant.m4, src/munged/Makefile.am:
	  Added configure test to determine how to link against pthreads.

	* src/munged/crypto_thread.c, src/munged/crypto_thread.h:
	  Removed ifdef for HAVE_LIBPTHREAD.

2004-03-19  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c, src/munge/unmunge.c, src/munged/conf.c:
	  Minor tweaks for FreeBSD 4.8.

2004-03-18  Chris Dunlap  <cdunlap@llnl.gov>

	* bootstrap: Force replacement of existing bootstrap-related files.

	* config/mkinstalldirs: Updated with latest version from automake-1.8.

	* config/compile, config/config.guess, config/config.sub,
	  config/depcomp, config/install-sh, config/ltmain.sh, config/missing:
	  Nuked and updated with latest versions via the bootstrap script.
	  Fixes bug where the ".so" suffix disappeared from shared lib names.

2004-03-17  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.3, libtool-1.5.2.

2004-03-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c, src/munged/conf.c,
	  src/munged/cred.c: Added dead store removal protection (ie, memburn).

	* src/munge/read.c (read_data_from_file): Removed unnecessary memset().

2004-03-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/zip.c:
	  Fixed gcc 3.3.3 (Debian 20040306) compiler warnings under "-O2".

	* configure.ac, config/x_ac_reentrant.m4, src/munged/Makefile.am:
	  Moved _REENTRANT to top-level "config.h".

2004-03-11  Chris Dunlap  <cdunlap@llnl.gov>

	* config/x_ac_check_cond_lib.m4, config/x_ac_check_peercred.m4,
	  config/x_ac_debug.m4, config/x_ac_gpl_licensed.m4,
	  config/x_ac_humor.m4, config/x_ac_meta.m4: Reformatted.

	* src/munged/Makefile.am: Added _REENTRANT def to munged CFLAGS.

	* configure.ac, config/x_ac_ltlibobjs.m4:
	  Removed munging of LIBOBJS & LTLIBOBJS for automake & libtool.
	  Refer to autoconf docs 15.6.4: AC_LIBOBJ vs. LIBOBJS.

	* configure.ac, config/x_ac_check_cond_lib.m4, src/libcommon/common.h,
	  src/libcommon/munge_defs.h, src/libcommon/munge_msg.c,
	  src/libmunge/decode.c, src/libmunge/munge.h, src/libmunge/strings.c,
	  src/munged/Makefile.am, src/munged/conf.c, src/munged/cred.c,
	  src/munged/cred.h, src/munged/dec_v1.c, src/munged/enc_v1.c,
	  src/munged/zip.c, src/munged/zip.h: Added support for compression.

	* src/munged/replay.c (replay_insert): Changed return codes.

	* config/x_ac_meta.m4: Added test for META file existence.

2004-03-05  Chris Dunlap  <cdunlap@llnl.gov>

	* config/ac_check_peercred.m4, config/ac_debug.m4,
	  config/ac_gpl_licensed.m4, config/ac_humor.m4,
	  config/ac_ltlibobjs.m4, config/ac_meta.m4:
	  Renamed to config/x_ac_*.m4 to prevent future potential
	  conflicts in the autoconf variable namespace.

	* config/ac_check_peercred.m4, config/ac_humor.m4:
	  Added autoconf caching support.

2004-03-04  Chris Dunlap  <cdunlap@llnl.gov>

	* README, munge.spec: Updated description.

2004-03-01  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/munge.c, src/munge/unmunge.c:
	  Ignore EPIPE when closing output streams.

2004-02-13  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/str.c, src/libcommon/str.h:
	  Removed strdump().  Added strhex().

2004-02-05  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/encode.c, src/munge/read.c, src/munged/base64.c,
	  src/munged/base64.h, src/munged/cipher.c, src/munged/cipher.h,
	  src/munged/mac.c, src/munged/mac.h, src/munged/md.c, src/munged/md.h:
	  Pedantic tweaks for AIX compiler.

2004-01-30  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/auth.c: Added support for getpeereid().

	* src/libmunge/ctx.c, src/libmunge/msg_client.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c, src/munged/munged.c:
	  Tweaked includes for FreeBSD 4.8.

	* configure.ac, config/ac_check_peercred.m4: Added checks for
	  HAVE_GETPEEREID, HAVE_SO_PEERCRED, and HAVE_STRUCT_STRRECVFD.

	* config/ac_debug.m4:
	  Replaced obsolete AC_HELP_STRING with AS_HELP_STRING.

2004-01-29  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/msg_client.c, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/conf.c, src/munged/sock.c:
	  Tweaked for compiler warnings under AIX 5.1.

	* src/libcommon/munge_msg.h, src/munged/conf.h, src/munged/cred.h:
	  Replaced <stdint.h> with <inttypes.h> based on info from the
	  autoconf doc (section 5.6.1: Portability of Headers).

2004-01-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.59, automake-1.8.2, libtool-1.5.2.

2004-01-27  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/str.c, src/libcommon/str.h: Added memburn().

2004-01-15  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/license.c: Updated copyright date range.

	* src/libcommon/munge_defs.h, src/libcommon/munge_msg.c
	  src/libcommon/munge_msg.h, src/libmunge/ctx.c,
	  src/libmunge/ctx.h, src/libmunge/decode.c,
	  src/libmunge/encode.c, src/libmunge/msg_client.c,
	  src/libmunge/munge.h, src/munge/unmunge.c, src/munged/cred.c,
	  src/munged/cred.h, src/munged/dec_v1.c, src/munged/enc_v1.c,
	  src/munged/msg_server.c, src/munged/msg_server.h:
	  Changed protocol between client (libmunge) and server (munged)
	  to allow credential data & metadata to be returned on error.

	* src/munge/unmunge.c (display_meta):
	  Added check for errors on the file stream "fp_meta".

2003-12-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/msg_server.c (munge_msg_server_thread):
	  Fixed _munge_msg_recv() error from getting logged twice.

	* src/libcommon/munge_msg.c (_munge_msg_send, _munge_msg_recv):
	  Fixed error conditions that were not errno conditions.

2003-12-11  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c (_munge_msg_send):
	  Changed to use gather-writes.

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 128 to 256.

2003-11-26  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.57, automake-1.7.9, libtool-1.5.0a.

	* src/libcommon/munge_defs.h, src/munged/Makefile.am,
	  src/munged/conf.c, src/munged/cred.h, src/munged/dec_v1.c,
	  src/munged/hash.c, src/munged/hash.h, src/munged/munged.c,
	  src/munged/replay.c, src/munged/replay.h, src/munged/thread.c,
	  src/munged/thread.h, src/munged/timer.c, src/munged/timer.h:
	  Added support for replay detection/prevention.

2003-10-28  Chris Dunlap  <cdunlap@llnl.gov>

	* : Re-bootstrap'd with autoconf-2.57, automake-1.7.8, libtool-1.5.0a.

	* src/etc/Makefile.am: Added support for /etc/init.d/ (Debian).

2003-10-24  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.2.

2003-10-14  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/random.c:
	  Changed RANDOM_SEED_DEFAULT from "/dev/random" to "/dev/urandom".

	* src/munged/dec_v1.c (dec_v1_unpack_inner):
	  Fixed unaligned access on ia64 {gnats:303}.

	* src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Fixed ia64 compiler warning that time_t "comparison is always false
	  due to limited range of data type".

2003-09-18  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential_v1_format.txt, src/libcommon/munge_defs.h,
	  src/libmunge/ctx.c, src/libmunge/decode.c, src/libmunge/encode.c,
	  src/libmunge/munge.h, src/munge/munge.c, src/munge/unmunge.c,
	  src/munged/conf.c, src/munged/conf.h, src/munged/dec_v1.c,
	  src/munged/enc_v1.c: Added TTL back into credential (for replay).

	* src/libcommon/fd.c: Tweaked formatting.

2003-07-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c: Augmented err msgs once again.

2003-07-02  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 64 to 128.

2003-06-27  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c:
	  Augmented err msgs with strerror() to track down failed fd_write_n().

2003-06-12  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/conf.c (create_conf):
	  Changed default value for got_clock_skew flag to true.

2003-06-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.c (_munge_msg_recv):
	  Fixed bug with unexpected message length assert.

2003-05-30  Chris Dunlap  <cdunlap@llnl.gov>

	* doc/credential-v1-format: Added.

2003-05-29  Chris Dunlap  <cdunlap@llnl.gov>

	* libcommon/munge_defs.h: Increased credential's salt from 56b to 64b.

	* src/libcommon/munge_msg.h, src/libmunge/ctx.c, src/libmunge/ctx.h,
	  src/libmunge/decode.c, src/libmunge/encode.c, src/libmunge/munge.h,
	  src/munge/unmunge.c, src/munged/conf.c, src/munged/conf.h,
	  src/munged/dec_v1.c, src/munged/enc_v1.c, src/munged/munged.c:
	  Added IP address where cred was encoded into the credential.
	  This breaks backwards-compatibility with existing credentials.
	  Added MUNGE_OPT_ADDR4 enum (and tweaked the enum values).

2003-05-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h: Update docs for munge_decode() to reflect
	  that an additional NUL is appended to the returned buffer.

	* src/munge/munge.c, src/munge/unmunge.c:
	  Changed manner in which strtol() is checked for error.

	* src/libmunge/msg_client.c (_munge_msg_client_connect):
	  Changed client's connect() retry backoff from exponential to linear.

	* src/munged/munged.c (segv_handler): Added.

2003-05-16  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h:
	  Increased MUNGE_SOCKET_BACKLOG from 10 to 64.

	* src/libcommon/log.c, src/libcommon/log.h:
	  Added log_errno().  All callers changed.

2003-05-07  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c (dec_v1_validate_time):
	  Added a minimum negative clock skew of 1 second, since we were
	  encountering EMUNGE_CRED_REWOUND in spite of NTP's best efforts.

2003-05-06  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added support for the "--enable-debug" configure script option.

	* src/etc/munge.init, src/libcommon/munge_defs.h, src/munged/conf.c,
	  src/munged/munged.c: Added munged F cmdline opt and daemon support.

	* src/munged/random.c (random_init): Added "seeding in progress" msg.

2003-05-03  Chris Dunlap  <cdunlap@llnl.gov>

	* HISTORY: Added.

	* src/munged/msg_server.c (err_v1_process_msg):
	  Fixed sending err msg with no body, but need to revisit this routine.

2003-05-02  Chris Dunlap  <cdunlap@llnl.gov>

	* : Removed dprintf() due to an interpositioning bug with a
	  GNU extension function named dprintf() -- who knew?!?

	* : Read PACKAGE/VERSION info from META file.

	* src/munge/munge.c, src/munge/unmunge.c, src/munged/conf.c:
	  Added V cmdline opt.

	* src/munge/unmunge.c (main): Fixed invalid read of free'd memory.

	* src/libmunge/decode.c (decode_rsp_v1):
	  Fixed dataless cred decode to match header (ie, no data is malloc'd).
	  Fixed overwrite of returned data buffer.

2003-04-30  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.1.

	* munge.spec: Tweaked description, pre/post/preun/postun, files.

	* : Added 'distclean-local' hook via Make-inc.mk.

	* : Added startup script.

2003-04-29  Chris Dunlap  <cdunlap@llnl.gov>

	* : Fixed compiler warnings under RH62 w/o -Wall.

2003-04-25  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.h, src/libmunge/strings.c, src/munged/enc_v1.c,
	  src/munged/lookup.c: Removed "half-mac" work-in-progress.

	* src/munge/munge.c, src/munge/unmunge.c: Tweaked "list" output.

	* src/munge/munge.c: Added c/C/m/M/z/Z cmdline opts.

	* src/munge/unmunge.c: Added t cmdline opt for setting TTL.
	  Added ENCODED, DECODED, CIPHER, MAC, ZIP metadata keys.

	* src/libmunge/munge.h, src/libmunge/ctx.c: Tweaked MUNGE_OPT_* enums.

	* src/libmunge/Makefile.am, src/libmunge/strings.c:
	  Added descriptive string arrays for enums.

2003-04-24  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munge/unmunge.c: Changed t/T cmdline opts to k/K.

2003-04-23  Chris Dunlap  <cdunlap@llnl.gov>

	* src/munged/dec_v1.c: Ensured MUNGE_TTL_FOREVER never expires.

	* libcommon/munge_defs.h: Reduced credential's salt from 64b to 56b.

	* src/libmunge/decode.c, src/libmunge/encode.c, src/munged/dec_v1.c,
	  src/munged/enc_v1.c: Removed credential's TTL field.

	* : Cleanup of error propagation code.

2003-04-22  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_msg.h, src/munged/dec_v1.c, src/munged/enc_v1.c:
	  Changed cred's realm_len from uint32_t to uint8_t.

2003-04-18  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libcommon/munge_defs.h, src/munged/conf.c:
	  Temporarily added MUNGED_RANDOM_SEED and MUNGED_SECRET_KEY defs.

	* src/libmunge/ctx.c, src/libmunge/munge.h, src/munge/munge.c:
	  Renamed munge_ctx_err() to munge_ctx_strerror().

	* : Committed munge_decode() support.

	* src/munged/md.c: Changed md_size() to return 0 on NULL ptr.
	* src/munged/mac.c: Changed mac_size() to return 0 on NULL ptr.
	* src/munged/cipher.c: Changed cipher_block_size(), cipher_iv_size(),
	  and cipher_key_size() to return 0 on NULL ptr.

	* src/munged/cipher.h: Added CIPHER_DECRYPT & CIPHER_ENCRYPT enums.

	* src/libcommon/str.c, src/libcommon/str.h: Added strdump().

	* src/libcommon/munge_defs.h:
	  Changed MUNGE_CRED_PREFIX & MUNGE_CRED_SUFFIX.

2003-04-08  Chris Dunlap  <cdunlap@llnl.gov>

	* : Committed munge_encode() support.

2003-02-18  Chris Dunlap  <cdunlap@llnl.gov>

	* : Changed #ifdef/#ifndef to #if where appropriate.

2003-02-16  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added GPL_LICENSED preprocessor macro support.

2003-02-13  Chris Dunlap  <cdunlap@llnl.gov>

	* : Added munge/unmunge cmdline progs.

2003-02-03  Chris Dunlap  <cdunlap@llnl.gov>

	* src/libmunge/munge.c, src/libmunge/munge.h:
	  Tweaked API for munge_encode() and munge_decode().

2002-12-20  Chris Dunlap  <cdunlap@llnl.gov>

	* : Released 0.0.

